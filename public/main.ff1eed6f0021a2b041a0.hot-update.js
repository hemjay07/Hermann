/*! For license information please see main.ff1eed6f0021a2b041a0.hot-update.js.LICENSE.txt */
"use strict";self.webpackHotUpdatehermann("main",{"./app/pages/Home/index.js":(e,t,n)=>{n.r(t),n.d(t,{default:()=>v});var i=n("./app/classes/Page.js"),r=n("./node_modules/lodash/lodash.js"),o=n("./node_modules/gsap/index.js");function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,s(i.key),i)}}function s(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=a(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}function u(e,t,n){return t=f(t),function(e,t){if(t&&("object"==a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,c()?Reflect.construct(t,n||[],f(e).constructor):t.apply(e,n))}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(c=function(){return!!e})()}function h(e,t,n,i){var r=d(f(1&i?e.prototype:e),t,n);return 2&i?function(e){return r.apply(n,e)}:r}function d(){return d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},d.apply(null,arguments)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}var v=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=u(this,t,[{id:"home",element:".home",elements:{galleries:".gallery__image",slider:".slider",revealer:".revealer",galleryName:".revealer__text",details:".gallery__details__item",indicators:".indicator-dot"}}])).rotation=0,e.rotationSpeed=10,e.currentSpeed=0,e.directionMultiplier=1,e.lastTime=performance.now(),e.touchStart=null,e.touchY=null,e.lastDeltaY=0,e.touchVelocity=0,e.isTouching=!1,e.isInitializing=!1,e.initialSpeed=860,e.initialStartTime=null,e.initialDuration=2700,e.onNavigationCallback=null,e.boundWheel=e.onWheel.bind(e),e.boundTouchStart=e.onTouchStart.bind(e),e.boundTouchMove=e.onTouchMove.bind(e),e.boundTouchEnd=e.onTouchEnd.bind(e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(t,e),n=t,(i=[{key:"create",value:function(){h(t,"create",this,3)([]),this.setupRotation(),this.addEventListener()}},{key:"setupRotation",value:function(){var e=this.elements.slider;e.style.transformStyle="preserve-3d",e.style.transform="perspective(1000px) rotateX(-16deg) rotateY(0deg)",this.startRotationLoop()}},{key:"initialSpeedUp",value:function(){this.isInitializing=!0}},{key:"startRotationLoop",value:function(){var e=this,t=function(n){var i=(n-e.lastTime)/1e3;if(e.lastTime=n,e.isInitializing){e.initialStartTime||(e.initialStartTime=n);var r=n-e.initialStartTime,o=Math.min(r/e.initialDuration,1);e.currentSpeed=(e.initialSpeed-(e.initialSpeed-e.rotationSpeed)*o)*e.directionMultiplier,1===o&&(e.isInitializing=!1)}else{var a=e.rotationSpeed*e.directionMultiplier;e.currentSpeed+=.2*(a-e.currentSpeed)}e.rotation+=e.currentSpeed*i,e.elements.slider.style.transform="perspective(1000px) rotateX(-16deg) rotateY(".concat(e.rotation,"deg)"),Math.abs(Math.abs(e.currentSpeed)-e.rotationSpeed)<.1&&e.updateDetailsAndIndicators(e.rotation),e.rotationFrame=requestAnimationFrame(t)};this.rotationFrame=requestAnimationFrame(t)}},{key:"updateDetailsAndIndicators",value:function(e){var t=(e%360+360)%360,n=Math.floor(t/360*6);-1===this.directionMultiplier&&(n=(n-1+6)%6),this.elements.details.forEach((function(e,t){o.default.to(e,{opacity:t===n?1:0,duration:.1,ease:"ease"})})),this.elements.indicators.forEach((function(e,t){e.style.backgroundColor=t===n?"hsl(78, 100%, 15%)":"hsla(78, 100%, 15%, 0.3)"})),this.elements.galleries.forEach((function(e,t){var i=e.querySelector("img");o.default.to(i,{filter:t===n?"grayscale(0%)":"grayscale(100%)",duration:.5})}))}},{key:"onWheel",value:function(e){e.preventDefault();var t=1.5*e.deltaY;Math.abs(t)>1&&(this.directionMultiplier=t>0?-1:1);var n=Math.abs(t);t>0&&this.directionMultiplier<0||t<0&&this.directionMultiplier>0?this.currentSpeed=this.directionMultiplier*Math.max(this.rotationSpeed,n):this.currentSpeed=n*this.directionMultiplier}},{key:"onTouchStart",value:function(e){e.preventDefault(),this.isTouching=!0,this.touchStart=e.touches[0].clientY,this.touchY=this.touchStart,this.touchVelocity=0}},{key:"onTouchMove",value:function(e){if(e.preventDefault(),this.isTouching){var t=e.touches[0].clientY,n=this.touchY-t;this.touchVelocity=n,this.lastDeltaY=n,this.onWheel({preventDefault:function(){},deltaY:2*n}),this.touchY=t}}},{key:"onTouchEnd",value:function(){var e=this;this.isTouching=!1;var t=15*this.touchVelocity,n=function(){Math.abs(t)>.1&&(e.onWheel({preventDefault:function(){},deltaY:t}),t*=.95,requestAnimationFrame(n))};requestAnimationFrame(n),this.touchStart=null,this.touchY=null}},{key:"onGalleryClick",value:function(e,t){t.preventDefault(),t.stopPropagation();var n=e.querySelector("a"),i=e.querySelector("img"),r=n.getAttribute("href");this.onNavigationCallback=function(){window.app.onChange({url:r})},this.galleryName=i.alt,this.elements.galleryName.innerText=this.galleryName,this.animateTransition()}},{key:"animateTransition",value:function(){var e=this,t=o.default.timeline(),n=Math.max(2*window.innerHeight,2*window.innerWidth);return t.set(this.elements.revealer,{display:"flex",y:"".concat(n,"px"),rotate:20}),t.set(this.elements.galleryName,{opacity:0,rotate:-20}),t.addLabel("firstHalf").to(this.elements.revealer,{y:"0",duration:1.2,ease:"power3.inOut"},"firstHalf").to(this.elements.galleryName,{opacity:1,duration:.8,ease:"power2.out"},"firstHalf+=0.4"),t.call((function(){e.onNavigationCallback&&(e.onNavigationCallback(),e.onNavigationCallback=null)}),null,"+=0.5"),t.addLabel("secondHalf").to(this.elements.galleryName,{opacity:0,duration:.6,ease:"power2.in"},"secondHalf").to(this.elements.revealer,{y:"-".concat(n,"px"),duration:2,rotate:20,ease:"power3.inOut"},"secondHalf+=0.2"),t.set(this.elements.revealer,{display:"none"}),t}},{key:"addEventListener",value:function(){var e=this;window.addEventListener("wheel",this.boundWheel,{passive:!1}),"ontouchstart"in window&&(this.elements.slider.addEventListener("touchstart",this.boundTouchStart,{passive:!1}),this.elements.slider.addEventListener("touchmove",this.boundTouchMove,{passive:!1}),this.elements.slider.addEventListener("touchend",this.boundTouchEnd)),r.forEach(this.elements.galleries,(function(t){var n=t.querySelector("a");e.boundGalleryClick=e.onGalleryClick.bind(e,t),n.addEventListener("click",e.boundGalleryClick)}))}},{key:"removeEventListeners",value:function(){var e=this;window.removeEventListener("wheel",this.boundWheel),"ontouchstart"in window&&(this.elements.slider.removeEventListener("touchstart",this.boundTouchStart),this.elements.slider.removeEventListener("touchmove",this.boundTouchMove),this.elements.slider.removeEventListener("touchend",this.boundTouchEnd)),r.forEach(this.elements.galleries,(function(t){t.querySelector("a").removeEventListener("click",e.boundGalleryClick)}))}},{key:"destroy",value:function(){this.rotationFrame&&cancelAnimationFrame(this.rotationFrame),this.removeEventListeners(),h(t,"destroy",this,3)([])}}])&&l(n.prototype,i),a&&l(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,a}(i.default)}},(function(e){e.h=()=>"7148f48ef55a1db9aa63"}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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bkIsS0FBS2tGLHVCQUNMbkYsRUFBQTNDLEVBQUEsaUJBQUEyQyxDQUFBLEdBQ0YsK0ZBQUMsQ0FsVHVCLENBQVNvRixFQUFBQSx3QkNKbENDLEVBQW9CQyxFQUFJLElBQU0iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oZXJtYW5uLy4vYXBwL3BhZ2VzL0hvbWUvaW5kZXguanMiLCJ3ZWJwYWNrOi8vaGVybWFubi93ZWJwYWNrL3J1bnRpbWUvZ2V0RnVsbEhhc2giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFBhZ2UgZnJvbSBcImNsYXNzZXMvUGFnZS5qc1wiO1xyXG5pbXBvcnQgXyBmcm9tIFwibG9kYXNoXCI7XHJcbmltcG9ydCBHU0FQIGZyb20gXCJnc2FwXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBIb21lIGV4dGVuZHMgUGFnZSB7XHJcbiBjb25zdHJ1Y3RvcigpIHtcclxuICAgc3VwZXIoe1xyXG4gICAgIGlkOiBcImhvbWVcIixcclxuICAgICBlbGVtZW50OiBcIi5ob21lXCIsIFxyXG4gICAgIGVsZW1lbnRzOiB7XHJcbiAgICAgICBnYWxsZXJpZXM6IFwiLmdhbGxlcnlfX2ltYWdlXCIsXHJcbiAgICAgICBzbGlkZXI6IFwiLnNsaWRlclwiLFxyXG4gICAgICAgcmV2ZWFsZXI6IFwiLnJldmVhbGVyXCIsXHJcbiAgICAgICBnYWxsZXJ5TmFtZTogXCIucmV2ZWFsZXJfX3RleHRcIixcclxuICAgICAgIGRldGFpbHM6IFwiLmdhbGxlcnlfX2RldGFpbHNfX2l0ZW1cIixcclxuICAgICAgIGluZGljYXRvcnM6IFwiLmluZGljYXRvci1kb3RcIlxyXG4gICAgIH1cclxuICAgfSk7XHJcblxyXG4gICAvLyBSb3RhdGlvbiBzeXN0ZW1cclxuICAgdGhpcy5yb3RhdGlvbiA9IDA7XHJcbiAgIHRoaXMucm90YXRpb25TcGVlZCA9IDM2MCAvIDM2O1xyXG4gICB0aGlzLmN1cnJlbnRTcGVlZCA9IDA7XHJcbiAgICAgICB0aGlzLmRpcmVjdGlvbk11bHRpcGxpZXIgPSAxO1xyXG5cclxuICAgdGhpcy5sYXN0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpO1xyXG5cclxuICAgLy8gVG91Y2ggdHJhY2tpbmcgcHJvcGVydGllc1xyXG4gICB0aGlzLnRvdWNoU3RhcnQgPSBudWxsO1xyXG4gICB0aGlzLnRvdWNoWSA9IG51bGw7XHJcbiAgIHRoaXMubGFzdERlbHRhWSA9IDA7XHJcbiAgIHRoaXMudG91Y2hWZWxvY2l0eSA9IDA7XHJcbiAgIHRoaXMuaXNUb3VjaGluZyA9IGZhbHNlO1xyXG5cclxuICAgLy8gSW5pdGlhbGl6YXRpb24gc3RhdGVzXHJcbiAgIHRoaXMuaXNJbml0aWFsaXppbmcgPSBmYWxzZTtcclxuICAgdGhpcy5pbml0aWFsU3BlZWQgPSA4NjA7XHJcbiAgIHRoaXMuaW5pdGlhbFN0YXJ0VGltZSA9IG51bGw7XHJcbiAgIHRoaXMuaW5pdGlhbER1cmF0aW9uID0gMjcwMDtcclxuXHJcbiAgIC8vIE5hdmlnYXRpb24gc3RhdGVcclxuICAgdGhpcy5vbk5hdmlnYXRpb25DYWxsYmFjayA9IG51bGw7XHJcblxyXG4gICAvLyBCaW5kIGV2ZW50IGhhbmRsZXJzXHJcbiAgICB0aGlzLmJvdW5kV2hlZWwgPSB0aGlzLm9uV2hlZWwuYmluZCh0aGlzKTtcclxuICB0aGlzLmJvdW5kVG91Y2hTdGFydCA9IHRoaXMub25Ub3VjaFN0YXJ0LmJpbmQodGhpcyk7XHJcbiAgdGhpcy5ib3VuZFRvdWNoTW92ZSA9IHRoaXMub25Ub3VjaE1vdmUuYmluZCh0aGlzKTtcclxuICB0aGlzLmJvdW5kVG91Y2hFbmQgPSB0aGlzLm9uVG91Y2hFbmQuYmluZCh0aGlzKTtcclxuIH1cclxuXHJcbiBjcmVhdGUoKSB7XHJcbiAgIHN1cGVyLmNyZWF0ZSgpO1xyXG4gICB0aGlzLnNldHVwUm90YXRpb24oKTtcclxuICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCk7XHJcbiB9XHJcblxyXG4gc2V0dXBSb3RhdGlvbigpIHtcclxuICAgY29uc3Qgc2xpZGVyID0gdGhpcy5lbGVtZW50cy5zbGlkZXI7XHJcbiAgIHNsaWRlci5zdHlsZS50cmFuc2Zvcm1TdHlsZSA9ICdwcmVzZXJ2ZS0zZCc7XHJcbiAgIHNsaWRlci5zdHlsZS50cmFuc2Zvcm0gPSAncGVyc3BlY3RpdmUoMTAwMHB4KSByb3RhdGVYKC0xNmRlZykgcm90YXRlWSgwZGVnKSc7XHJcbiAgIHRoaXMuc3RhcnRSb3RhdGlvbkxvb3AoKTtcclxuIH1cclxuXHJcbiBpbml0aWFsU3BlZWRVcCgpIHtcclxuICAgdGhpcy5pc0luaXRpYWxpemluZyA9IHRydWU7XHJcbiB9XHJcblxyXG4gc3RhcnRSb3RhdGlvbkxvb3AoKSB7XHJcbiAgIGNvbnN0IGFuaW1hdGUgPSAoY3VycmVudFRpbWUpID0+IHtcclxuICAgICBjb25zdCBkZWx0YVRpbWUgPSAoY3VycmVudFRpbWUgLSB0aGlzLmxhc3RUaW1lKSAvIDEwMDA7XHJcbiAgICAgdGhpcy5sYXN0VGltZSA9IGN1cnJlbnRUaW1lO1xyXG5cclxuICAgICBpZiAodGhpcy5pc0luaXRpYWxpemluZykge1xyXG4gICAgICAgaWYgKCF0aGlzLmluaXRpYWxTdGFydFRpbWUpIHRoaXMuaW5pdGlhbFN0YXJ0VGltZSA9IGN1cnJlbnRUaW1lO1xyXG5cclxuICAgICAgIGNvbnN0IGVsYXBzZWRUaW1lID0gY3VycmVudFRpbWUgLSB0aGlzLmluaXRpYWxTdGFydFRpbWU7XHJcbiAgICAgICBjb25zdCBwcm9ncmVzcyA9IE1hdGgubWluKGVsYXBzZWRUaW1lIC8gdGhpcy5pbml0aWFsRHVyYXRpb24sIDEpO1xyXG5cclxuICAgICAgICB0aGlzLmN1cnJlbnRTcGVlZCA9ICh0aGlzLmluaXRpYWxTcGVlZCAtICh0aGlzLmluaXRpYWxTcGVlZCAtIHRoaXMucm90YXRpb25TcGVlZCkgKiBwcm9ncmVzcykgKiB0aGlzLmRpcmVjdGlvbk11bHRpcGxpZXI7XHJcblxyXG4gICAgICAgaWYgKHByb2dyZXNzID09PSAxKSB7XHJcbiAgICAgICAgIHRoaXMuaXNJbml0aWFsaXppbmcgPSBmYWxzZTtcclxuICAgICAgIH1cclxuICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnN0IHRhcmdldFNwZWVkID0gdGhpcy5yb3RhdGlvblNwZWVkICogdGhpcy5kaXJlY3Rpb25NdWx0aXBsaWVyO1xyXG4gICAgICAgdGhpcy5jdXJyZW50U3BlZWQgKz0gKHRhcmdldFNwZWVkIC0gdGhpcy5jdXJyZW50U3BlZWQpICogMC4yO1xyXG4gICAgIH1cclxuXHJcbiAgICAgdGhpcy5yb3RhdGlvbiArPSB0aGlzLmN1cnJlbnRTcGVlZCAqIGRlbHRhVGltZTtcclxuXHJcbiAgICAgdGhpcy5lbGVtZW50cy5zbGlkZXIuc3R5bGUudHJhbnNmb3JtID0gXHJcbiAgICAgICBgcGVyc3BlY3RpdmUoMTAwMHB4KSByb3RhdGVYKC0xNmRlZykgcm90YXRlWSgke3RoaXMucm90YXRpb259ZGVnKWA7XHJcblxyXG4gICAgXHJcbiAgICAgIGlmIChNYXRoLmFicyhNYXRoLmFicyh0aGlzLmN1cnJlbnRTcGVlZCkgLSB0aGlzLnJvdGF0aW9uU3BlZWQpIDwgMC4xKSB7XHJcbiAgICAgICAgdGhpcy51cGRhdGVEZXRhaWxzQW5kSW5kaWNhdG9ycyh0aGlzLnJvdGF0aW9uKTtcclxuICAgICAgfVxyXG5cclxuICAgICB0aGlzLnJvdGF0aW9uRnJhbWUgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoYW5pbWF0ZSk7XHJcbiAgIH07XHJcblxyXG4gICB0aGlzLnJvdGF0aW9uRnJhbWUgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoYW5pbWF0ZSk7XHJcbiB9XHJcblxyXG4gdXBkYXRlRGV0YWlsc0FuZEluZGljYXRvcnMocm90YXRpb24pIHtcclxuICAgY29uc3Qgbm9ybWFsaXplZFJvdGF0aW9uID0gKChyb3RhdGlvbiAlIDM2MCkgKyAzNjApICUgMzYwO1xyXG4gICBcclxuICAgbGV0IGFjdGl2ZUluZGV4ID0gTWF0aC5mbG9vcigobm9ybWFsaXplZFJvdGF0aW9uIC8gMzYwKSAqIDYpO1xyXG5cclxuICAgIGlmICh0aGlzLmRpcmVjdGlvbk11bHRpcGxpZXIgPT09IC0xKSB7XHJcbiAgICBhY3RpdmVJbmRleCA9IChhY3RpdmVJbmRleCAtIDEgKyA2KSAlIDY7IC8vIFNoaWZ0IGJhY2t3YXJkLCB3cmFwIGFyb3VuZFxyXG4gIH1cclxuICAgdGhpcy5lbGVtZW50cy5kZXRhaWxzLmZvckVhY2goKGRldGFpbCwgaW5kZXgpID0+IHtcclxuICAgICBHU0FQLnRvKGRldGFpbCwge1xyXG4gICAgICAgb3BhY2l0eTogaW5kZXggPT09IGFjdGl2ZUluZGV4ID8gMSA6IDAsXHJcbiAgICAgICBkdXJhdGlvbjogMC4xLFxyXG4gICAgICAgZWFzZTogXCJlYXNlXCJcclxuICAgICB9KTtcclxuICAgfSk7XHJcblxyXG4gICB0aGlzLmVsZW1lbnRzLmluZGljYXRvcnMuZm9yRWFjaCgoaW5kaWNhdG9yLCBpbmRleCkgPT4ge1xyXG4gICAgIGluZGljYXRvci5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBpbmRleCA9PT0gYWN0aXZlSW5kZXggPyBcclxuICAgICAgICdoc2woNzgsIDEwMCUsIDE1JSknIDogXHJcbiAgICAgICAnaHNsYSg3OCwgMTAwJSwgMTUlLCAwLjMpJztcclxuICAgfSk7XHJcblxyXG4gICB0aGlzLmVsZW1lbnRzLmdhbGxlcmllcy5mb3JFYWNoKChnYWxsZXJ5LCBpbmRleCkgPT4ge1xyXG4gICAgIGNvbnN0IGltZyA9IGdhbGxlcnkucXVlcnlTZWxlY3RvcignaW1nJyk7XHJcbiAgICAgR1NBUC50byhpbWcsIHtcclxuICAgICAgIGZpbHRlcjogaW5kZXggPT09IGFjdGl2ZUluZGV4ID8gJ2dyYXlzY2FsZSgwJSknIDogJ2dyYXlzY2FsZSgxMDAlKScsXHJcbiAgICAgICBkdXJhdGlvbjogMC41XHJcbiAgICAgfSk7XHJcbiAgIH0pO1xyXG4gfVxyXG5cclxuIG9uV2hlZWwoZXZlbnQpIHtcclxuICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgY29uc3Qgc2Nyb2xsSW5mbHVlbmNlID0gZXZlbnQuZGVsdGFZICogMS41O1xyXG5cclxuICAgIGlmIChNYXRoLmFicyhzY3JvbGxJbmZsdWVuY2UpID4gMSkge1xyXG4gICAgICAgIHRoaXMuZGlyZWN0aW9uTXVsdGlwbGllciA9IHNjcm9sbEluZmx1ZW5jZSA+IDAgPyAtMSA6IDE7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgc2Nyb2xsU3BlZWQgPSBNYXRoLmFicyhzY3JvbGxJbmZsdWVuY2UpO1xyXG4gICAgXHJcbiAgICBpZiAoKHNjcm9sbEluZmx1ZW5jZSA+IDAgJiYgdGhpcy5kaXJlY3Rpb25NdWx0aXBsaWVyIDwgMCkgfHwgXHJcbiAgICAgICAgKHNjcm9sbEluZmx1ZW5jZSA8IDAgJiYgdGhpcy5kaXJlY3Rpb25NdWx0aXBsaWVyID4gMCkpIHtcclxuICAgICAgICB0aGlzLmN1cnJlbnRTcGVlZCA9IHRoaXMuZGlyZWN0aW9uTXVsdGlwbGllciAqIFxyXG4gICAgICAgICAgICBNYXRoLm1heCh0aGlzLnJvdGF0aW9uU3BlZWQsIHNjcm9sbFNwZWVkKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50U3BlZWQgPSBzY3JvbGxTcGVlZCAqIHRoaXMuZGlyZWN0aW9uTXVsdGlwbGllcjtcclxuICAgIH0gfVxyXG5cclxuIG9uVG91Y2hTdGFydChldmVudCkge1xyXG4gICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICB0aGlzLmlzVG91Y2hpbmcgPSB0cnVlO1xyXG4gICB0aGlzLnRvdWNoU3RhcnQgPSBldmVudC50b3VjaGVzWzBdLmNsaWVudFk7XHJcbiAgIHRoaXMudG91Y2hZID0gdGhpcy50b3VjaFN0YXJ0O1xyXG4gICB0aGlzLnRvdWNoVmVsb2NpdHkgPSAwO1xyXG4gfVxyXG5cclxuIG9uVG91Y2hNb3ZlKGV2ZW50KSB7XHJcbiAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgIGlmICghdGhpcy5pc1RvdWNoaW5nKSByZXR1cm47XHJcblxyXG4gICBjb25zdCBjdXJyZW50WSA9IGV2ZW50LnRvdWNoZXNbMF0uY2xpZW50WTtcclxuICAgY29uc3QgZGVsdGFZID0gdGhpcy50b3VjaFkgLSBjdXJyZW50WTtcclxuXHJcbiAgIHRoaXMudG91Y2hWZWxvY2l0eSA9IGRlbHRhWTtcclxuICAgdGhpcy5sYXN0RGVsdGFZID0gZGVsdGFZO1xyXG5cclxuICAgdGhpcy5vbldoZWVsKHsgXHJcbiAgICAgcHJldmVudERlZmF1bHQ6ICgpID0+IHt9LFxyXG4gICAgIGRlbHRhWTogZGVsdGFZICogMlxyXG4gICB9KTtcclxuXHJcbiAgIHRoaXMudG91Y2hZID0gY3VycmVudFk7XHJcbiB9XHJcblxyXG4gb25Ub3VjaEVuZCgpIHtcclxuICAgdGhpcy5pc1RvdWNoaW5nID0gZmFsc2U7XHJcblxyXG4gICBjb25zdCBzdGFydFZlbG9jaXR5ID0gdGhpcy50b3VjaFZlbG9jaXR5ICogMTU7XHJcbiAgIGxldCBjdXJyZW50VmVsb2NpdHkgPSBzdGFydFZlbG9jaXR5O1xyXG5cclxuICAgY29uc3QgZGVjYXkgPSAoKSA9PiB7XHJcbiAgICAgaWYgKE1hdGguYWJzKGN1cnJlbnRWZWxvY2l0eSkgPiAwLjEpIHtcclxuICAgICAgIHRoaXMub25XaGVlbCh7XHJcbiAgICAgICAgIHByZXZlbnREZWZhdWx0OiAoKSA9PiB7fSxcclxuICAgICAgICAgZGVsdGFZOiBjdXJyZW50VmVsb2NpdHlcclxuICAgICAgIH0pO1xyXG5cclxuICAgICAgIGN1cnJlbnRWZWxvY2l0eSAqPSAwLjk1O1xyXG4gICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGRlY2F5KTtcclxuICAgICB9XHJcbiAgIH07XHJcblxyXG4gICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZGVjYXkpO1xyXG5cclxuICAgdGhpcy50b3VjaFN0YXJ0ID0gbnVsbDtcclxuICAgdGhpcy50b3VjaFkgPSBudWxsO1xyXG4gfVxyXG5cclxuIG9uR2FsbGVyeUNsaWNrKGdhbGxlcnksIGV2ZW50KSB7XHJcbiAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cclxuICAgY29uc3QgbGluayA9IGdhbGxlcnkucXVlcnlTZWxlY3RvcignYScpO1xyXG4gICBjb25zdCBpbWdFbGVtZW50ID0gZ2FsbGVyeS5xdWVyeVNlbGVjdG9yKCdpbWcnKTtcclxuICAgY29uc3QgaHJlZiA9IGxpbmsuZ2V0QXR0cmlidXRlKCdocmVmJyk7XHJcblxyXG4gICB0aGlzLm9uTmF2aWdhdGlvbkNhbGxiYWNrID0gKCkgPT4ge1xyXG4gICAgIHdpbmRvdy5hcHAub25DaGFuZ2UoeyB1cmw6IGhyZWYgfSk7XHJcbiAgIH07XHJcblxyXG4gICB0aGlzLmdhbGxlcnlOYW1lID0gaW1nRWxlbWVudC5hbHQ7XHJcbiAgIHRoaXMuZWxlbWVudHMuZ2FsbGVyeU5hbWUuaW5uZXJUZXh0ID0gdGhpcy5nYWxsZXJ5TmFtZTtcclxuXHJcbiAgIHRoaXMuYW5pbWF0ZVRyYW5zaXRpb24oKTtcclxuIH1cclxuXHJcbiBhbmltYXRlVHJhbnNpdGlvbigpIHtcclxuICAgY29uc3QgdGwgPSBHU0FQLnRpbWVsaW5lKCk7XHJcbiAgIGNvbnN0IG1heERpbWVuc2lvbiA9IE1hdGgubWF4KHdpbmRvdy5pbm5lckhlaWdodCAqIDIsIHdpbmRvdy5pbm5lcldpZHRoICogMik7XHJcblxyXG4gICB0bC5zZXQodGhpcy5lbGVtZW50cy5yZXZlYWxlciwge1xyXG4gICAgIGRpc3BsYXk6ICdmbGV4JyxcclxuICAgICB5OiBgJHttYXhEaW1lbnNpb259cHhgLFxyXG4gICAgIHJvdGF0ZTogMjBcclxuICAgfSk7XHJcblxyXG4gICB0bC5zZXQodGhpcy5lbGVtZW50cy5nYWxsZXJ5TmFtZSwge1xyXG4gICAgIG9wYWNpdHk6IDAsXHJcbiAgICAgcm90YXRlOiAtMjBcclxuICAgfSk7XHJcblxyXG4gICB0bC5hZGRMYWJlbChcImZpcnN0SGFsZlwiKVxyXG4gICAgIC50byh0aGlzLmVsZW1lbnRzLnJldmVhbGVyLCB7XHJcbiAgICAgICB5OiBcIjBcIixcclxuICAgICAgIGR1cmF0aW9uOiAxLjIsXHJcbiAgICAgICBlYXNlOiBcInBvd2VyMy5pbk91dFwiXHJcbiAgICAgfSwgXCJmaXJzdEhhbGZcIilcclxuICAgICAudG8odGhpcy5lbGVtZW50cy5nYWxsZXJ5TmFtZSwge1xyXG4gICAgICAgb3BhY2l0eTogMSxcclxuICAgICAgIGR1cmF0aW9uOiAwLjgsXHJcbiAgICAgICBlYXNlOiBcInBvd2VyMi5vdXRcIlxyXG4gICAgIH0sIFwiZmlyc3RIYWxmKz0wLjRcIik7XHJcblxyXG4gICB0bC5jYWxsKCgpID0+IHtcclxuICAgICBpZiAodGhpcy5vbk5hdmlnYXRpb25DYWxsYmFjaykge1xyXG4gICAgICAgdGhpcy5vbk5hdmlnYXRpb25DYWxsYmFjaygpO1xyXG4gICAgICAgdGhpcy5vbk5hdmlnYXRpb25DYWxsYmFjayA9IG51bGw7XHJcbiAgICAgfVxyXG4gICB9LCBudWxsLCBcIis9MC41XCIpO1xyXG5cclxuICAgdGwuYWRkTGFiZWwoXCJzZWNvbmRIYWxmXCIpXHJcbiAgICAgLnRvKHRoaXMuZWxlbWVudHMuZ2FsbGVyeU5hbWUsIHtcclxuICAgICAgIG9wYWNpdHk6IDAsXHJcbiAgICAgICBkdXJhdGlvbjogMC42LFxyXG4gICAgICAgZWFzZTogXCJwb3dlcjIuaW5cIlxyXG4gICAgIH0sIFwic2Vjb25kSGFsZlwiKVxyXG4gICAgIC50byh0aGlzLmVsZW1lbnRzLnJldmVhbGVyLCB7XHJcbiAgICAgICB5OiBgLSR7bWF4RGltZW5zaW9ufXB4YCxcclxuICAgICAgIGR1cmF0aW9uOiAyLFxyXG4gICAgICAgcm90YXRlOiAyMCxcclxuICAgICAgIGVhc2U6IFwicG93ZXIzLmluT3V0XCJcclxuICAgICB9LCBcInNlY29uZEhhbGYrPTAuMlwiKTtcclxuXHJcbiAgIHRsLnNldCh0aGlzLmVsZW1lbnRzLnJldmVhbGVyLCB7IGRpc3BsYXk6ICdub25lJyB9KTtcclxuXHJcbiAgIHJldHVybiB0bDtcclxuIH1cclxuYWRkRXZlbnRMaXN0ZW5lcigpIHtcclxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignd2hlZWwnLCB0aGlzLmJvdW5kV2hlZWwsIHsgcGFzc2l2ZTogZmFsc2UgfSk7XHJcbiAgXHJcbiAgaWYgKCdvbnRvdWNoc3RhcnQnIGluIHdpbmRvdykge1xyXG4gICAgdGhpcy5lbGVtZW50cy5zbGlkZXIuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHRoaXMuYm91bmRUb3VjaFN0YXJ0LCB7IHBhc3NpdmU6IGZhbHNlIH0pO1xyXG4gICAgdGhpcy5lbGVtZW50cy5zbGlkZXIuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgdGhpcy5ib3VuZFRvdWNoTW92ZSwgeyBwYXNzaXZlOiBmYWxzZSB9KTtcclxuICAgIHRoaXMuZWxlbWVudHMuc2xpZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdGhpcy5ib3VuZFRvdWNoRW5kKTtcclxuICB9XHJcblxyXG4gIF8uZm9yRWFjaCh0aGlzLmVsZW1lbnRzLmdhbGxlcmllcywgKGdhbGxlcnkpID0+IHtcclxuICAgIGNvbnN0IGxpbmsgPSBnYWxsZXJ5LnF1ZXJ5U2VsZWN0b3IoJ2EnKTtcclxuICAgIHRoaXMuYm91bmRHYWxsZXJ5Q2xpY2sgPSB0aGlzLm9uR2FsbGVyeUNsaWNrLmJpbmQodGhpcywgZ2FsbGVyeSk7XHJcbiAgICBsaW5rLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmJvdW5kR2FsbGVyeUNsaWNrKTtcclxuICB9KTtcclxufVxyXG5cclxucmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3doZWVsJywgdGhpcy5ib3VuZFdoZWVsKTtcclxuICBcclxuICBpZiAoJ29udG91Y2hzdGFydCcgaW4gd2luZG93KSB7XHJcbiAgICB0aGlzLmVsZW1lbnRzLnNsaWRlci5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgdGhpcy5ib3VuZFRvdWNoU3RhcnQpO1xyXG4gICAgdGhpcy5lbGVtZW50cy5zbGlkZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgdGhpcy5ib3VuZFRvdWNoTW92ZSk7XHJcbiAgICB0aGlzLmVsZW1lbnRzLnNsaWRlci5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHRoaXMuYm91bmRUb3VjaEVuZCk7XHJcbiAgfVxyXG5cclxuICBfLmZvckVhY2godGhpcy5lbGVtZW50cy5nYWxsZXJpZXMsIChnYWxsZXJ5KSA9PiB7XHJcbiAgICBjb25zdCBsaW5rID0gZ2FsbGVyeS5xdWVyeVNlbGVjdG9yKCdhJyk7XHJcbiAgICBsaW5rLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmJvdW5kR2FsbGVyeUNsaWNrKTtcclxuICB9KTtcclxufVxyXG5cclxuXHJcbiBkZXN0cm95KCkge1xyXG4gICBpZiAodGhpcy5yb3RhdGlvbkZyYW1lKSB7XHJcbiAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5yb3RhdGlvbkZyYW1lKTtcclxuICAgfVxyXG4gICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgIHN1cGVyLmRlc3Ryb3koKTtcclxuIH1cclxufVxyXG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmggPSAoKSA9PiAoXCI3MTQ4ZjQ4ZWY1NWExZGI5YWE2M1wiKSJdLCJuYW1lcyI6WyJIb21lIiwiX1BhZ2UiLCJfdGhpcyIsIl9jbGFzc0NhbGxDaGVjayIsIl9jYWxsU3VwZXIiLCJpZCIsImVsZW1lbnQiLCJlbGVtZW50cyIsImdhbGxlcmllcyIsInNsaWRlciIsInJldmVhbGVyIiwiZ2FsbGVyeU5hbWUiLCJkZXRhaWxzIiwiaW5kaWNhdG9ycyIsInJvdGF0aW9uIiwicm90YXRpb25TcGVlZCIsImN1cnJlbnRTcGVlZCIsImRpcmVjdGlvbk11bHRpcGxpZXIiLCJsYXN0VGltZSIsInBlcmZvcm1hbmNlIiwibm93IiwidG91Y2hTdGFydCIsInRvdWNoWSIsImxhc3REZWx0YVkiLCJ0b3VjaFZlbG9jaXR5IiwiaXNUb3VjaGluZyIsImlzSW5pdGlhbGl6aW5nIiwiaW5pdGlhbFNwZWVkIiwiaW5pdGlhbFN0YXJ0VGltZSIsImluaXRpYWxEdXJhdGlvbiIsIm9uTmF2aWdhdGlvbkNhbGxiYWNrIiwiYm91bmRXaGVlbCIsIm9uV2hlZWwiLCJiaW5kIiwiYm91bmRUb3VjaFN0YXJ0Iiwib25Ub3VjaFN0YXJ0IiwiYm91bmRUb3VjaE1vdmUiLCJvblRvdWNoTW92ZSIsImJvdW5kVG91Y2hFbmQiLCJvblRvdWNoRW5kIiwiX2luaGVyaXRzIiwia2V5IiwidmFsdWUiLCJfc3VwZXJQcm9wR2V0IiwidGhpcyIsInNldHVwUm90YXRpb24iLCJhZGRFdmVudExpc3RlbmVyIiwic3R5bGUiLCJ0cmFuc2Zvcm1TdHlsZSIsInRyYW5zZm9ybSIsInN0YXJ0Um90YXRpb25Mb29wIiwiX3RoaXMyIiwiYW5pbWF0ZSIsImN1cnJlbnRUaW1lIiwiZGVsdGFUaW1lIiwiZWxhcHNlZFRpbWUiLCJwcm9ncmVzcyIsIk1hdGgiLCJtaW4iLCJ0YXJnZXRTcGVlZCIsImNvbmNhdCIsImFicyIsInVwZGF0ZURldGFpbHNBbmRJbmRpY2F0b3JzIiwicm90YXRpb25GcmFtZSIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsIm5vcm1hbGl6ZWRSb3RhdGlvbiIsImFjdGl2ZUluZGV4IiwiZmxvb3IiLCJmb3JFYWNoIiwiZGV0YWlsIiwiaW5kZXgiLCJHU0FQIiwidG8iLCJvcGFjaXR5IiwiZHVyYXRpb24iLCJlYXNlIiwiaW5kaWNhdG9yIiwiYmFja2dyb3VuZENvbG9yIiwiZ2FsbGVyeSIsImltZyIsInF1ZXJ5U2VsZWN0b3IiLCJmaWx0ZXIiLCJldmVudCIsInByZXZlbnREZWZhdWx0Iiwic2Nyb2xsSW5mbHVlbmNlIiwiZGVsdGFZIiwic2Nyb2xsU3BlZWQiLCJtYXgiLCJ0b3VjaGVzIiwiY2xpZW50WSIsImN1cnJlbnRZIiwiX3RoaXMzIiwiY3VycmVudFZlbG9jaXR5IiwiZGVjYXkiLCJzdG9wUHJvcGFnYXRpb24iLCJsaW5rIiwiaW1nRWxlbWVudCIsImhyZWYiLCJnZXRBdHRyaWJ1dGUiLCJ3aW5kb3ciLCJhcHAiLCJvbkNoYW5nZSIsInVybCIsImFsdCIsImlubmVyVGV4dCIsImFuaW1hdGVUcmFuc2l0aW9uIiwiX3RoaXM0IiwidGwiLCJ0aW1lbGluZSIsIm1heERpbWVuc2lvbiIsImlubmVySGVpZ2h0IiwiaW5uZXJXaWR0aCIsInNldCIsImRpc3BsYXkiLCJ5Iiwicm90YXRlIiwiYWRkTGFiZWwiLCJjYWxsIiwiX3RoaXM1IiwicGFzc2l2ZSIsIl8iLCJib3VuZEdhbGxlcnlDbGljayIsIm9uR2FsbGVyeUNsaWNrIiwiX3RoaXM2IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImNhbmNlbEFuaW1hdGlvbkZyYW1lIiwicmVtb3ZlRXZlbnRMaXN0ZW5lcnMiLCJQYWdlIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsImgiXSwic291cmNlUm9vdCI6IiJ9