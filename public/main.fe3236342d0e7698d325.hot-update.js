/*! For license information please see main.fe3236342d0e7698d325.hot-update.js.LICENSE.txt */
"use strict";self.webpackHotUpdatehermann("main",{"./app/pages/Home/index.js":(e,t,n)=>{n.r(t),n.d(t,{default:()=>v});var i=n("./app/classes/Page.js"),o=n("./node_modules/lodash/lodash.js"),r=n("./node_modules/gsap/index.js");function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,u(i.key),i)}}function u(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=a(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}function s(e,t,n){return t=f(t),function(e,t){if(t&&("object"==a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,c()?Reflect.construct(t,n||[],f(e).constructor):t.apply(e,n))}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(c=function(){return!!e})()}function h(e,t,n,i){var o=d(f(1&i?e.prototype:e),t,n);return 2&i?function(e){return o.apply(n,e)}:o}function d(){return d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},d.apply(null,arguments)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}var v=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=s(this,t,[{id:"home",element:".home",elements:{galleries:".gallery__image",slider:".slider",revealer:".revealer",galleryName:".revealer__text",details:".gallery__details__item",indicators:".indicator-dot"}}])).rotation=0,e.rotationSpeed=10,e.currentSpeed=0,e.lastTime=performance.now(),e.touchStart=null,e.touchY=null,e.lastDeltaY=0,e.touchVelocity=0,e.isTouching=!1,e.isInitializing=!1,e.initialSpeed=860,e.initialStartTime=null,e.initialDuration=2700,e.onNavigationCallback=null,e.boundWheel=e.onWheel.bind(e),e.boundTouchStart=e.onTouchStart.bind(e),e.boundTouchMove=e.onTouchMove.bind(e),e.boundTouchEnd=e.onTouchEnd.bind(e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(t,e),n=t,(i=[{key:"create",value:function(){h(t,"create",this,3)([]),this.setupRotation(),this.addEventListener()}},{key:"setupRotation",value:function(){var e=this.elements.slider;e.style.transformStyle="preserve-3d",e.style.transform="perspective(1000px) rotateX(-16deg) rotateY(0deg)",this.startRotationLoop()}},{key:"initialSpeedUp",value:function(){this.isInitializing=!0}},{key:"startRotationLoop",value:function(){var e=this,t=function(n){var i=(n-e.lastTime)/1e3;if(e.lastTime=n,e.isInitializing){e.initialStartTime||(e.initialStartTime=n);var o=n-e.initialStartTime,r=Math.min(o/e.initialDuration,1);e.currentSpeed=e.initialSpeed-(e.initialSpeed-e.rotationSpeed)*r,1===r&&(e.isInitializing=!1)}else{var a=e.rotationSpeed;e.currentSpeed+=.2*(a-e.currentSpeed)}e.rotation+=e.currentSpeed*i,e.elements.slider.style.transform="perspective(1000px) rotateX(-16deg) rotateY(".concat(e.rotation,"deg)"),Math.abs(e.currentSpeed-e.rotationSpeed)<.1&&e.updateDetailsAndIndicators(e.rotation),e.rotationFrame=requestAnimationFrame(t)};this.rotationFrame=requestAnimationFrame(t)}},{key:"updateDetailsAndIndicators",value:function(e){var t=(e%360+360)%360,n=Math.floor(t/360*6);this.elements.details.forEach((function(e,t){r.default.to(e,{opacity:t===n?1:0,duration:.1,ease:"ease"})})),this.elements.indicators.forEach((function(e,t){e.style.backgroundColor=t===n?"hsl(78, 100%, 15%)":"hsla(78, 100%, 15%, 0.3)"})),this.elements.galleries.forEach((function(e,t){var i=e.querySelector("img");r.default.to(i,{filter:t===n?"grayscale(0%)":"grayscale(100%)",duration:.5})}))}},{key:"onWheel",value:function(e){e.preventDefault();var t=1.5*e.deltaY;this.currentSpeed=Math.abs(t)}},{key:"onTouchStart",value:function(e){e.preventDefault(),this.isTouching=!0,this.touchStart=e.touches[0].clientY,this.touchY=this.touchStart,this.touchVelocity=0}},{key:"onTouchMove",value:function(e){if(e.preventDefault(),this.isTouching){var t=e.touches[0].clientY,n=this.touchY-t;this.touchVelocity=n,this.lastDeltaY=n,this.onWheel({preventDefault:function(){},deltaY:2*n}),this.touchY=t}}},{key:"onTouchEnd",value:function(){var e=this;this.isTouching=!1;var t=15*this.touchVelocity,n=function(){Math.abs(t)>.1&&(e.onWheel({preventDefault:function(){},deltaY:t}),t*=.95,requestAnimationFrame(n))};requestAnimationFrame(n),this.touchStart=null,this.touchY=null}},{key:"onGalleryClick",value:function(e,t){t.preventDefault(),t.stopPropagation();var n=e.querySelector("a"),i=e.querySelector("img"),o=n.getAttribute("href");this.onNavigationCallback=function(){window.app.onChange({url:o})},this.galleryName=i.alt,this.elements.galleryName.innerText=this.galleryName,this.animateTransition()}},{key:"animateTransition",value:function(){var e=this,t=r.default.timeline(),n=Math.max(2*window.innerHeight,2*window.innerWidth);return t.set(this.elements.revealer,{display:"flex",y:"".concat(n,"px"),rotate:20}),t.set(this.elements.galleryName,{opacity:0,rotate:-20}),t.addLabel("firstHalf").to(this.elements.revealer,{y:"0",duration:1.2,ease:"power3.inOut"},"firstHalf").to(this.elements.galleryName,{opacity:1,duration:.8,ease:"power2.out"},"firstHalf+=0.4"),t.call((function(){e.onNavigationCallback&&(e.onNavigationCallback(),e.onNavigationCallback=null)}),null,"+=0.5"),t.addLabel("secondHalf").to(this.elements.galleryName,{opacity:0,duration:.6,ease:"power2.in"},"secondHalf").to(this.elements.revealer,{y:"-".concat(n,"px"),duration:2,rotate:20,ease:"power3.inOut"},"secondHalf+=0.2"),t.set(this.elements.revealer,{display:"none"}),t}},{key:"addEventListener",value:function(){var e=this;window.addEventListener("wheel",this.boundWheel,{passive:!1}),"ontouchstart"in window&&(this.element.addEventListener("touchstart",this.boundTouchStart),this.element.addEventListener("touchmove",this.boundTouchMove),this.element.addEventListener("touchend",this.boundTouchEnd)),o.forEach(this.elements.galleries,(function(t){var n=t.querySelector("a");e.boundGalleryClick=e.onGalleryClick.bind(e,t),n.addEventListener("click",e.boundGalleryClick)}))}},{key:"removeEventListeners",value:function(){var e=this;window.removeEventListener("wheel",this.boundWheel),"ontouchstart"in window&&(this.element.removeEventListener("touchstart",this.boundTouchStart),this.element.removeEventListener("touchmove",this.boundTouchMove),this.element.removeEventListener("touchend",this.boundTouchEnd)),o.forEach(this.elements.galleries,(function(t){t.querySelector("a").removeEventListener("click",e.boundGalleryClick)}))}},{key:"destroy",value:function(){this.rotationFrame&&cancelAnimationFrame(this.rotationFrame),this.removeEventListeners(),h(t,"destroy",this,3)([])}}])&&l(n.prototype,i),a&&l(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,a}(i.default)}},(function(e){e.h=()=>"2fe63f003176a0f0c14c"}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFBS0ksZUFBZXhGLEtBQUtvRixFQUFNdkMsR0FDeERlLEVBQUsvQyxpQkFBaUIsUUFBU3VFLEVBQUtHLGtCQUN0QyxHQUNGLEdBQUMsQ0FBQS9FLElBQUEsdUJBQUFDLE1BRUQsV0FBdUIsSUFBQWdGLEVBQUEsS0FDckJ6QixPQUFPMEIsb0JBQW9CLFFBQVMvRSxLQUFLYixZQUVyQyxpQkFBa0JrRSxTQUNwQnJELEtBQUtyQyxRQUFRb0gsb0JBQW9CLGFBQWMvRSxLQUFLVixpQkFDcERVLEtBQUtyQyxRQUFRb0gsb0JBQW9CLFlBQWEvRSxLQUFLUixnQkFDbkRRLEtBQUtyQyxRQUFRb0gsb0JBQW9CLFdBQVkvRSxLQUFLTixnQkFHcERpRixFQUFBQSxRQUFVM0UsS0FBS3BDLFNBQVNDLFdBQVcsU0FBQ3FFLEdBQ3JCQSxFQUFRRSxjQUFjLEtBQzlCMkMsb0JBQW9CLFFBQVNELEVBQUtGLGtCQUN6QyxHQUNGLEdBQUMsQ0FBQS9FLElBQUEsVUFBQUMsTUFFRCxXQUNNRSxLQUFLbUIsZUFDUDZELHFCQUFxQmhGLEtBQUttQixlQUU1Qm5CLEtBQUtpRix1QkFDTGxGLEVBQUExQyxFQUFBLGlCQUFBMEMsQ0FBQSxHQUNGLCtGQUFDLENBL1J1QixDQUFTbUYsRUFBQUEsd0JDSmxDQyxFQUFvQkMsRUFBSSxJQUFNIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGVybWFubi8uL2FwcC9wYWdlcy9Ib21lL2luZGV4LmpzIiwid2VicGFjazovL2hlcm1hbm4vd2VicGFjay9ydW50aW1lL2dldEZ1bGxIYXNoIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBQYWdlIGZyb20gXCJjbGFzc2VzL1BhZ2UuanNcIjtcclxuaW1wb3J0IF8gZnJvbSBcImxvZGFzaFwiO1xyXG5pbXBvcnQgR1NBUCBmcm9tIFwiZ3NhcFwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSG9tZSBleHRlbmRzIFBhZ2Uge1xyXG4gY29uc3RydWN0b3IoKSB7XHJcbiAgIHN1cGVyKHtcclxuICAgICBpZDogXCJob21lXCIsXHJcbiAgICAgZWxlbWVudDogXCIuaG9tZVwiLCBcclxuICAgICBlbGVtZW50czoge1xyXG4gICAgICAgZ2FsbGVyaWVzOiBcIi5nYWxsZXJ5X19pbWFnZVwiLFxyXG4gICAgICAgc2xpZGVyOiBcIi5zbGlkZXJcIixcclxuICAgICAgIHJldmVhbGVyOiBcIi5yZXZlYWxlclwiLFxyXG4gICAgICAgZ2FsbGVyeU5hbWU6IFwiLnJldmVhbGVyX190ZXh0XCIsXHJcbiAgICAgICBkZXRhaWxzOiBcIi5nYWxsZXJ5X19kZXRhaWxzX19pdGVtXCIsXHJcbiAgICAgICBpbmRpY2F0b3JzOiBcIi5pbmRpY2F0b3ItZG90XCJcclxuICAgICB9XHJcbiAgIH0pO1xyXG5cclxuICAgLy8gUm90YXRpb24gc3lzdGVtXHJcbiAgIHRoaXMucm90YXRpb24gPSAwO1xyXG4gICB0aGlzLnJvdGF0aW9uU3BlZWQgPSAzNjAgLyAzNjtcclxuICAgdGhpcy5jdXJyZW50U3BlZWQgPSAwO1xyXG4gICB0aGlzLmxhc3RUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XHJcblxyXG4gICAvLyBUb3VjaCB0cmFja2luZyBwcm9wZXJ0aWVzXHJcbiAgIHRoaXMudG91Y2hTdGFydCA9IG51bGw7XHJcbiAgIHRoaXMudG91Y2hZID0gbnVsbDtcclxuICAgdGhpcy5sYXN0RGVsdGFZID0gMDtcclxuICAgdGhpcy50b3VjaFZlbG9jaXR5ID0gMDtcclxuICAgdGhpcy5pc1RvdWNoaW5nID0gZmFsc2U7XHJcblxyXG4gICAvLyBJbml0aWFsaXphdGlvbiBzdGF0ZXNcclxuICAgdGhpcy5pc0luaXRpYWxpemluZyA9IGZhbHNlO1xyXG4gICB0aGlzLmluaXRpYWxTcGVlZCA9IDg2MDtcclxuICAgdGhpcy5pbml0aWFsU3RhcnRUaW1lID0gbnVsbDtcclxuICAgdGhpcy5pbml0aWFsRHVyYXRpb24gPSAyNzAwO1xyXG5cclxuICAgLy8gTmF2aWdhdGlvbiBzdGF0ZVxyXG4gICB0aGlzLm9uTmF2aWdhdGlvbkNhbGxiYWNrID0gbnVsbDtcclxuXHJcbiAgIC8vIEJpbmQgZXZlbnQgaGFuZGxlcnNcclxuICAgdGhpcy5ib3VuZFdoZWVsID0gdGhpcy5vbldoZWVsLmJpbmQodGhpcyk7XHJcbiAgIHRoaXMuYm91bmRUb3VjaFN0YXJ0ID0gdGhpcy5vblRvdWNoU3RhcnQuYmluZCh0aGlzKTtcclxuICAgdGhpcy5ib3VuZFRvdWNoTW92ZSA9IHRoaXMub25Ub3VjaE1vdmUuYmluZCh0aGlzKTtcclxuICAgdGhpcy5ib3VuZFRvdWNoRW5kID0gdGhpcy5vblRvdWNoRW5kLmJpbmQodGhpcyk7XHJcbiB9XHJcblxyXG4gY3JlYXRlKCkge1xyXG4gICBzdXBlci5jcmVhdGUoKTtcclxuICAgdGhpcy5zZXR1cFJvdGF0aW9uKCk7XHJcbiAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcigpO1xyXG4gfVxyXG5cclxuIHNldHVwUm90YXRpb24oKSB7XHJcbiAgIGNvbnN0IHNsaWRlciA9IHRoaXMuZWxlbWVudHMuc2xpZGVyO1xyXG4gICBzbGlkZXIuc3R5bGUudHJhbnNmb3JtU3R5bGUgPSAncHJlc2VydmUtM2QnO1xyXG4gICBzbGlkZXIuc3R5bGUudHJhbnNmb3JtID0gJ3BlcnNwZWN0aXZlKDEwMDBweCkgcm90YXRlWCgtMTZkZWcpIHJvdGF0ZVkoMGRlZyknO1xyXG4gICB0aGlzLnN0YXJ0Um90YXRpb25Mb29wKCk7XHJcbiB9XHJcblxyXG4gaW5pdGlhbFNwZWVkVXAoKSB7XHJcbiAgIHRoaXMuaXNJbml0aWFsaXppbmcgPSB0cnVlO1xyXG4gfVxyXG5cclxuIHN0YXJ0Um90YXRpb25Mb29wKCkge1xyXG4gICBjb25zdCBhbmltYXRlID0gKGN1cnJlbnRUaW1lKSA9PiB7XHJcbiAgICAgY29uc3QgZGVsdGFUaW1lID0gKGN1cnJlbnRUaW1lIC0gdGhpcy5sYXN0VGltZSkgLyAxMDAwO1xyXG4gICAgIHRoaXMubGFzdFRpbWUgPSBjdXJyZW50VGltZTtcclxuXHJcbiAgICAgaWYgKHRoaXMuaXNJbml0aWFsaXppbmcpIHtcclxuICAgICAgIGlmICghdGhpcy5pbml0aWFsU3RhcnRUaW1lKSB0aGlzLmluaXRpYWxTdGFydFRpbWUgPSBjdXJyZW50VGltZTtcclxuXHJcbiAgICAgICBjb25zdCBlbGFwc2VkVGltZSA9IGN1cnJlbnRUaW1lIC0gdGhpcy5pbml0aWFsU3RhcnRUaW1lO1xyXG4gICAgICAgY29uc3QgcHJvZ3Jlc3MgPSBNYXRoLm1pbihlbGFwc2VkVGltZSAvIHRoaXMuaW5pdGlhbER1cmF0aW9uLCAxKTtcclxuXHJcbiAgICAgICB0aGlzLmN1cnJlbnRTcGVlZCA9IHRoaXMuaW5pdGlhbFNwZWVkIC0gKHRoaXMuaW5pdGlhbFNwZWVkIC0gdGhpcy5yb3RhdGlvblNwZWVkKSAqIHByb2dyZXNzO1xyXG5cclxuICAgICAgIGlmIChwcm9ncmVzcyA9PT0gMSkge1xyXG4gICAgICAgICB0aGlzLmlzSW5pdGlhbGl6aW5nID0gZmFsc2U7XHJcbiAgICAgICB9XHJcbiAgICAgfSBlbHNlIHtcclxuICAgICAgIGNvbnN0IHRhcmdldFNwZWVkID0gdGhpcy5yb3RhdGlvblNwZWVkO1xyXG4gICAgICAgdGhpcy5jdXJyZW50U3BlZWQgKz0gKHRhcmdldFNwZWVkIC0gdGhpcy5jdXJyZW50U3BlZWQpICogMC4yO1xyXG4gICAgIH1cclxuXHJcbiAgICAgdGhpcy5yb3RhdGlvbiArPSB0aGlzLmN1cnJlbnRTcGVlZCAqIGRlbHRhVGltZTtcclxuXHJcbiAgICAgdGhpcy5lbGVtZW50cy5zbGlkZXIuc3R5bGUudHJhbnNmb3JtID0gXHJcbiAgICAgICBgcGVyc3BlY3RpdmUoMTAwMHB4KSByb3RhdGVYKC0xNmRlZykgcm90YXRlWSgke3RoaXMucm90YXRpb259ZGVnKWA7XHJcblxyXG4gICAgIGlmIChNYXRoLmFicyh0aGlzLmN1cnJlbnRTcGVlZCAtIHRoaXMucm90YXRpb25TcGVlZCkgPCAwLjEpIHtcclxuICAgICAgIHRoaXMudXBkYXRlRGV0YWlsc0FuZEluZGljYXRvcnModGhpcy5yb3RhdGlvbik7XHJcbiAgICAgfVxyXG5cclxuICAgICB0aGlzLnJvdGF0aW9uRnJhbWUgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoYW5pbWF0ZSk7XHJcbiAgIH07XHJcblxyXG4gICB0aGlzLnJvdGF0aW9uRnJhbWUgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoYW5pbWF0ZSk7XHJcbiB9XHJcblxyXG4gdXBkYXRlRGV0YWlsc0FuZEluZGljYXRvcnMocm90YXRpb24pIHtcclxuICAgY29uc3Qgbm9ybWFsaXplZFJvdGF0aW9uID0gKChyb3RhdGlvbiAlIDM2MCkgKyAzNjApICUgMzYwO1xyXG4gICBjb25zdCBhY3RpdmVJbmRleCA9IE1hdGguZmxvb3IoKG5vcm1hbGl6ZWRSb3RhdGlvbiAvIDM2MCkgKiA2KTtcclxuXHJcbiAgIHRoaXMuZWxlbWVudHMuZGV0YWlscy5mb3JFYWNoKChkZXRhaWwsIGluZGV4KSA9PiB7XHJcbiAgICAgR1NBUC50byhkZXRhaWwsIHtcclxuICAgICAgIG9wYWNpdHk6IGluZGV4ID09PSBhY3RpdmVJbmRleCA/IDEgOiAwLFxyXG4gICAgICAgZHVyYXRpb246IDAuMSxcclxuICAgICAgIGVhc2U6IFwiZWFzZVwiXHJcbiAgICAgfSk7XHJcbiAgIH0pO1xyXG5cclxuICAgdGhpcy5lbGVtZW50cy5pbmRpY2F0b3JzLmZvckVhY2goKGluZGljYXRvciwgaW5kZXgpID0+IHtcclxuICAgICBpbmRpY2F0b3Iuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gaW5kZXggPT09IGFjdGl2ZUluZGV4ID8gXHJcbiAgICAgICAnaHNsKDc4LCAxMDAlLCAxNSUpJyA6IFxyXG4gICAgICAgJ2hzbGEoNzgsIDEwMCUsIDE1JSwgMC4zKSc7XHJcbiAgIH0pO1xyXG5cclxuICAgdGhpcy5lbGVtZW50cy5nYWxsZXJpZXMuZm9yRWFjaCgoZ2FsbGVyeSwgaW5kZXgpID0+IHtcclxuICAgICBjb25zdCBpbWcgPSBnYWxsZXJ5LnF1ZXJ5U2VsZWN0b3IoJ2ltZycpO1xyXG4gICAgIEdTQVAudG8oaW1nLCB7XHJcbiAgICAgICBmaWx0ZXI6IGluZGV4ID09PSBhY3RpdmVJbmRleCA/ICdncmF5c2NhbGUoMCUpJyA6ICdncmF5c2NhbGUoMTAwJSknLFxyXG4gICAgICAgZHVyYXRpb246IDAuNVxyXG4gICAgIH0pO1xyXG4gICB9KTtcclxuIH1cclxuXHJcbiBvbldoZWVsKGV2ZW50KSB7XHJcbiAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgIGNvbnN0IHNjcm9sbEluZmx1ZW5jZSA9IGV2ZW50LmRlbHRhWSAqIDEuNTtcclxuICAgdGhpcy5jdXJyZW50U3BlZWQgPSBNYXRoLmFicyhzY3JvbGxJbmZsdWVuY2UpO1xyXG4gfVxyXG5cclxuIG9uVG91Y2hTdGFydChldmVudCkge1xyXG4gICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICB0aGlzLmlzVG91Y2hpbmcgPSB0cnVlO1xyXG4gICB0aGlzLnRvdWNoU3RhcnQgPSBldmVudC50b3VjaGVzWzBdLmNsaWVudFk7XHJcbiAgIHRoaXMudG91Y2hZID0gdGhpcy50b3VjaFN0YXJ0O1xyXG4gICB0aGlzLnRvdWNoVmVsb2NpdHkgPSAwO1xyXG4gfVxyXG5cclxuIG9uVG91Y2hNb3ZlKGV2ZW50KSB7XHJcbiAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgIGlmICghdGhpcy5pc1RvdWNoaW5nKSByZXR1cm47XHJcblxyXG4gICBjb25zdCBjdXJyZW50WSA9IGV2ZW50LnRvdWNoZXNbMF0uY2xpZW50WTtcclxuICAgY29uc3QgZGVsdGFZID0gdGhpcy50b3VjaFkgLSBjdXJyZW50WTtcclxuXHJcbiAgIHRoaXMudG91Y2hWZWxvY2l0eSA9IGRlbHRhWTtcclxuICAgdGhpcy5sYXN0RGVsdGFZID0gZGVsdGFZO1xyXG5cclxuICAgdGhpcy5vbldoZWVsKHsgXHJcbiAgICAgcHJldmVudERlZmF1bHQ6ICgpID0+IHt9LFxyXG4gICAgIGRlbHRhWTogZGVsdGFZICogMlxyXG4gICB9KTtcclxuXHJcbiAgIHRoaXMudG91Y2hZID0gY3VycmVudFk7XHJcbiB9XHJcblxyXG4gb25Ub3VjaEVuZCgpIHtcclxuICAgdGhpcy5pc1RvdWNoaW5nID0gZmFsc2U7XHJcblxyXG4gICBjb25zdCBzdGFydFZlbG9jaXR5ID0gdGhpcy50b3VjaFZlbG9jaXR5ICogMTU7XHJcbiAgIGxldCBjdXJyZW50VmVsb2NpdHkgPSBzdGFydFZlbG9jaXR5O1xyXG5cclxuICAgY29uc3QgZGVjYXkgPSAoKSA9PiB7XHJcbiAgICAgaWYgKE1hdGguYWJzKGN1cnJlbnRWZWxvY2l0eSkgPiAwLjEpIHtcclxuICAgICAgIHRoaXMub25XaGVlbCh7XHJcbiAgICAgICAgIHByZXZlbnREZWZhdWx0OiAoKSA9PiB7fSxcclxuICAgICAgICAgZGVsdGFZOiBjdXJyZW50VmVsb2NpdHlcclxuICAgICAgIH0pO1xyXG5cclxuICAgICAgIGN1cnJlbnRWZWxvY2l0eSAqPSAwLjk1O1xyXG4gICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGRlY2F5KTtcclxuICAgICB9XHJcbiAgIH07XHJcblxyXG4gICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZGVjYXkpO1xyXG5cclxuICAgdGhpcy50b3VjaFN0YXJ0ID0gbnVsbDtcclxuICAgdGhpcy50b3VjaFkgPSBudWxsO1xyXG4gfVxyXG5cclxuIG9uR2FsbGVyeUNsaWNrKGdhbGxlcnksIGV2ZW50KSB7XHJcbiAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cclxuICAgY29uc3QgbGluayA9IGdhbGxlcnkucXVlcnlTZWxlY3RvcignYScpO1xyXG4gICBjb25zdCBpbWdFbGVtZW50ID0gZ2FsbGVyeS5xdWVyeVNlbGVjdG9yKCdpbWcnKTtcclxuICAgY29uc3QgaHJlZiA9IGxpbmsuZ2V0QXR0cmlidXRlKCdocmVmJyk7XHJcblxyXG4gICB0aGlzLm9uTmF2aWdhdGlvbkNhbGxiYWNrID0gKCkgPT4ge1xyXG4gICAgIHdpbmRvdy5hcHAub25DaGFuZ2UoeyB1cmw6IGhyZWYgfSk7XHJcbiAgIH07XHJcblxyXG4gICB0aGlzLmdhbGxlcnlOYW1lID0gaW1nRWxlbWVudC5hbHQ7XHJcbiAgIHRoaXMuZWxlbWVudHMuZ2FsbGVyeU5hbWUuaW5uZXJUZXh0ID0gdGhpcy5nYWxsZXJ5TmFtZTtcclxuXHJcbiAgIHRoaXMuYW5pbWF0ZVRyYW5zaXRpb24oKTtcclxuIH1cclxuXHJcbiBhbmltYXRlVHJhbnNpdGlvbigpIHtcclxuICAgY29uc3QgdGwgPSBHU0FQLnRpbWVsaW5lKCk7XHJcbiAgIGNvbnN0IG1heERpbWVuc2lvbiA9IE1hdGgubWF4KHdpbmRvdy5pbm5lckhlaWdodCAqIDIsIHdpbmRvdy5pbm5lcldpZHRoICogMik7XHJcblxyXG4gICB0bC5zZXQodGhpcy5lbGVtZW50cy5yZXZlYWxlciwge1xyXG4gICAgIGRpc3BsYXk6ICdmbGV4JyxcclxuICAgICB5OiBgJHttYXhEaW1lbnNpb259cHhgLFxyXG4gICAgIHJvdGF0ZTogMjBcclxuICAgfSk7XHJcblxyXG4gICB0bC5zZXQodGhpcy5lbGVtZW50cy5nYWxsZXJ5TmFtZSwge1xyXG4gICAgIG9wYWNpdHk6IDAsXHJcbiAgICAgcm90YXRlOiAtMjBcclxuICAgfSk7XHJcblxyXG4gICB0bC5hZGRMYWJlbChcImZpcnN0SGFsZlwiKVxyXG4gICAgIC50byh0aGlzLmVsZW1lbnRzLnJldmVhbGVyLCB7XHJcbiAgICAgICB5OiBcIjBcIixcclxuICAgICAgIGR1cmF0aW9uOiAxLjIsXHJcbiAgICAgICBlYXNlOiBcInBvd2VyMy5pbk91dFwiXHJcbiAgICAgfSwgXCJmaXJzdEhhbGZcIilcclxuICAgICAudG8odGhpcy5lbGVtZW50cy5nYWxsZXJ5TmFtZSwge1xyXG4gICAgICAgb3BhY2l0eTogMSxcclxuICAgICAgIGR1cmF0aW9uOiAwLjgsXHJcbiAgICAgICBlYXNlOiBcInBvd2VyMi5vdXRcIlxyXG4gICAgIH0sIFwiZmlyc3RIYWxmKz0wLjRcIik7XHJcblxyXG4gICB0bC5jYWxsKCgpID0+IHtcclxuICAgICBpZiAodGhpcy5vbk5hdmlnYXRpb25DYWxsYmFjaykge1xyXG4gICAgICAgdGhpcy5vbk5hdmlnYXRpb25DYWxsYmFjaygpO1xyXG4gICAgICAgdGhpcy5vbk5hdmlnYXRpb25DYWxsYmFjayA9IG51bGw7XHJcbiAgICAgfVxyXG4gICB9LCBudWxsLCBcIis9MC41XCIpO1xyXG5cclxuICAgdGwuYWRkTGFiZWwoXCJzZWNvbmRIYWxmXCIpXHJcbiAgICAgLnRvKHRoaXMuZWxlbWVudHMuZ2FsbGVyeU5hbWUsIHtcclxuICAgICAgIG9wYWNpdHk6IDAsXHJcbiAgICAgICBkdXJhdGlvbjogMC42LFxyXG4gICAgICAgZWFzZTogXCJwb3dlcjIuaW5cIlxyXG4gICAgIH0sIFwic2Vjb25kSGFsZlwiKVxyXG4gICAgIC50byh0aGlzLmVsZW1lbnRzLnJldmVhbGVyLCB7XHJcbiAgICAgICB5OiBgLSR7bWF4RGltZW5zaW9ufXB4YCxcclxuICAgICAgIGR1cmF0aW9uOiAyLFxyXG4gICAgICAgcm90YXRlOiAyMCxcclxuICAgICAgIGVhc2U6IFwicG93ZXIzLmluT3V0XCJcclxuICAgICB9LCBcInNlY29uZEhhbGYrPTAuMlwiKTtcclxuXHJcbiAgIHRsLnNldCh0aGlzLmVsZW1lbnRzLnJldmVhbGVyLCB7IGRpc3BsYXk6ICdub25lJyB9KTtcclxuXHJcbiAgIHJldHVybiB0bDtcclxuIH1cclxuXHJcbiBhZGRFdmVudExpc3RlbmVyKCkge1xyXG4gICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignd2hlZWwnLCB0aGlzLmJvdW5kV2hlZWwsIHsgcGFzc2l2ZTogZmFsc2UgfSk7XHJcblxyXG4gICBpZiAoJ29udG91Y2hzdGFydCcgaW4gd2luZG93KSB7XHJcbiAgICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCB0aGlzLmJvdW5kVG91Y2hTdGFydCk7XHJcbiAgICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIHRoaXMuYm91bmRUb3VjaE1vdmUpO1xyXG4gICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHRoaXMuYm91bmRUb3VjaEVuZCk7XHJcbiAgIH1cclxuXHJcbiAgIF8uZm9yRWFjaCh0aGlzLmVsZW1lbnRzLmdhbGxlcmllcywgKGdhbGxlcnkpID0+IHtcclxuICAgICBjb25zdCBsaW5rID0gZ2FsbGVyeS5xdWVyeVNlbGVjdG9yKCdhJyk7XHJcbiAgICAgdGhpcy5ib3VuZEdhbGxlcnlDbGljayA9IHRoaXMub25HYWxsZXJ5Q2xpY2suYmluZCh0aGlzLCBnYWxsZXJ5KTtcclxuICAgICBsaW5rLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmJvdW5kR2FsbGVyeUNsaWNrKTtcclxuICAgfSk7XHJcbiB9XHJcblxyXG4gcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCd3aGVlbCcsIHRoaXMuYm91bmRXaGVlbCk7XHJcblxyXG4gICBpZiAoJ29udG91Y2hzdGFydCcgaW4gd2luZG93KSB7XHJcbiAgICAgdGhpcy5lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCB0aGlzLmJvdW5kVG91Y2hTdGFydCk7XHJcbiAgICAgdGhpcy5lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIHRoaXMuYm91bmRUb3VjaE1vdmUpO1xyXG4gICAgIHRoaXMuZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHRoaXMuYm91bmRUb3VjaEVuZCk7XHJcbiAgIH1cclxuXHJcbiAgIF8uZm9yRWFjaCh0aGlzLmVsZW1lbnRzLmdhbGxlcmllcywgKGdhbGxlcnkpID0+IHtcclxuICAgICBjb25zdCBsaW5rID0gZ2FsbGVyeS5xdWVyeVNlbGVjdG9yKCdhJyk7XHJcbiAgICAgbGluay5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5ib3VuZEdhbGxlcnlDbGljayk7XHJcbiAgIH0pO1xyXG4gfVxyXG5cclxuIGRlc3Ryb3koKSB7XHJcbiAgIGlmICh0aGlzLnJvdGF0aW9uRnJhbWUpIHtcclxuICAgICBjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLnJvdGF0aW9uRnJhbWUpO1xyXG4gICB9XHJcbiAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgc3VwZXIuZGVzdHJveSgpO1xyXG4gfVxyXG59XHJcbiIsIl9fd2VicGFja19yZXF1aXJlX18uaCA9ICgpID0+IChcIjJmZTYzZjAwMzE3NmEwZjBjMTRjXCIpIl0sIm5hbWVzIjpbIkhvbWUiLCJfUGFnZSIsIl90aGlzIiwiX2NsYXNzQ2FsbENoZWNrIiwiX2NhbGxTdXBlciIsImlkIiwiZWxlbWVudCIsImVsZW1lbnRzIiwiZ2FsbGVyaWVzIiwic2xpZGVyIiwicmV2ZWFsZXIiLCJnYWxsZXJ5TmFtZSIsImRldGFpbHMiLCJpbmRpY2F0b3JzIiwicm90YXRpb24iLCJyb3RhdGlvblNwZWVkIiwiY3VycmVudFNwZWVkIiwibGFzdFRpbWUiLCJwZXJmb3JtYW5jZSIsIm5vdyIsInRvdWNoU3RhcnQiLCJ0b3VjaFkiLCJsYXN0RGVsdGFZIiwidG91Y2hWZWxvY2l0eSIsImlzVG91Y2hpbmciLCJpc0luaXRpYWxpemluZyIsImluaXRpYWxTcGVlZCIsImluaXRpYWxTdGFydFRpbWUiLCJpbml0aWFsRHVyYXRpb24iLCJvbk5hdmlnYXRpb25DYWxsYmFjayIsImJvdW5kV2hlZWwiLCJvbldoZWVsIiwiYmluZCIsImJvdW5kVG91Y2hTdGFydCIsIm9uVG91Y2hTdGFydCIsImJvdW5kVG91Y2hNb3ZlIiwib25Ub3VjaE1vdmUiLCJib3VuZFRvdWNoRW5kIiwib25Ub3VjaEVuZCIsIl9pbmhlcml0cyIsImtleSIsInZhbHVlIiwiX3N1cGVyUHJvcEdldCIsInRoaXMiLCJzZXR1cFJvdGF0aW9uIiwiYWRkRXZlbnRMaXN0ZW5lciIsInN0eWxlIiwidHJhbnNmb3JtU3R5bGUiLCJ0cmFuc2Zvcm0iLCJzdGFydFJvdGF0aW9uTG9vcCIsIl90aGlzMiIsImFuaW1hdGUiLCJjdXJyZW50VGltZSIsImRlbHRhVGltZSIsImVsYXBzZWRUaW1lIiwicHJvZ3Jlc3MiLCJNYXRoIiwibWluIiwidGFyZ2V0U3BlZWQiLCJjb25jYXQiLCJhYnMiLCJ1cGRhdGVEZXRhaWxzQW5kSW5kaWNhdG9ycyIsInJvdGF0aW9uRnJhbWUiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJub3JtYWxpemVkUm90YXRpb24iLCJhY3RpdmVJbmRleCIsImZsb29yIiwiZm9yRWFjaCIsImRldGFpbCIsImluZGV4IiwiR1NBUCIsInRvIiwib3BhY2l0eSIsImR1cmF0aW9uIiwiZWFzZSIsImluZGljYXRvciIsImJhY2tncm91bmRDb2xvciIsImdhbGxlcnkiLCJpbWciLCJxdWVyeVNlbGVjdG9yIiwiZmlsdGVyIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInNjcm9sbEluZmx1ZW5jZSIsImRlbHRhWSIsInRvdWNoZXMiLCJjbGllbnRZIiwiY3VycmVudFkiLCJfdGhpczMiLCJjdXJyZW50VmVsb2NpdHkiLCJkZWNheSIsInN0b3BQcm9wYWdhdGlvbiIsImxpbmsiLCJpbWdFbGVtZW50IiwiaHJlZiIsImdldEF0dHJpYnV0ZSIsIndpbmRvdyIsImFwcCIsIm9uQ2hhbmdlIiwidXJsIiwiYWx0IiwiaW5uZXJUZXh0IiwiYW5pbWF0ZVRyYW5zaXRpb24iLCJfdGhpczQiLCJ0bCIsInRpbWVsaW5lIiwibWF4RGltZW5zaW9uIiwibWF4IiwiaW5uZXJIZWlnaHQiLCJpbm5lcldpZHRoIiwic2V0IiwiZGlzcGxheSIsInkiLCJyb3RhdGUiLCJhZGRMYWJlbCIsImNhbGwiLCJfdGhpczUiLCJwYXNzaXZlIiwiXyIsImJvdW5kR2FsbGVyeUNsaWNrIiwib25HYWxsZXJ5Q2xpY2siLCJfdGhpczYiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiY2FuY2VsQW5pbWF0aW9uRnJhbWUiLCJyZW1vdmVFdmVudExpc3RlbmVycyIsIlBhZ2UiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiaCJdLCJzb3VyY2VSb290IjoiIn0=