/*! For license information please see main.7b577f7511cb0ccc730a.hot-update.js.LICENSE.txt */
"use strict";self.webpackHotUpdatehermann("main",{"./app/pages/Home/index.js":(e,t,i)=>{i.r(t),i.d(t,{default:()=>v});var n=i("./app/classes/Page.js"),r=i("./node_modules/lodash/lodash.js"),o=i("./node_modules/gsap/index.js");function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function l(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,s(n.key),n)}}function s(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}function u(e,t,i){return t=f(t),function(e,t){if(t&&("object"==a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,c()?Reflect.construct(t,i||[],f(e).constructor):t.apply(e,i))}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(c=function(){return!!e})()}function h(e,t,i,n){var r=d(f(1&n?e.prototype:e),t,i);return 2&n?function(e){return r.apply(i,e)}:r}function d(){return d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,i){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(n){var r=Object.getOwnPropertyDescriptor(n,t);return r.get?r.get.call(arguments.length<3?e:i):r.value}},d.apply(null,arguments)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}var v=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=u(this,t,[{id:"home",element:".home",elements:{galleries:".gallery__image",slider:".slider",revealer:".revealer",galleryName:".revealer__text",details:".gallery__details__item",indicators:".indicator-dot"}}])).rotation=0,e.rotationSpeed=10,e.currentSpeed=0,e.directionMultiplier=1,e.lastTime=performance.now(),e.touchStart=null,e.touchY=null,e.lastDeltaY=0,e.touchVelocity=0,e.isTouching=!1,e.isInitializing=!1,e.initialSpeed=860,e.initialStartTime=null,e.initialDuration=2700,e.onNavigationCallback=null,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(t,e),i=t,(n=[{key:"create",value:function(){h(t,"create",this,3)([]),this.setupRotation(),this.addEventListener()}},{key:"setupRotation",value:function(){var e=this.elements.slider;e.style.transformStyle="preserve-3d",e.style.transform="perspective(1000px) rotateX(-16deg) rotateY(0deg)",this.startRotationLoop()}},{key:"initialSpeedUp",value:function(){this.isInitializing=!0}},{key:"startRotationLoop",value:function(){var e=this,t=function(i){var n=(i-e.lastTime)/1e3;if(e.lastTime=i,e.isInitializing){e.initialStartTime||(e.initialStartTime=i);var r=i-e.initialStartTime,o=Math.min(r/e.initialDuration,1);e.currentSpeed=(e.initialSpeed-(e.initialSpeed-e.rotationSpeed)*o)*e.directionMultiplier,1===o&&(e.isInitializing=!1)}else{var a=e.rotationSpeed*e.directionMultiplier;e.currentSpeed+=.2*(a-e.currentSpeed)}e.rotation+=e.currentSpeed*n,e.elements.slider.style.transform="perspective(1000px) rotateX(-16deg) rotateY(".concat(e.rotation,"deg)"),Math.abs(Math.abs(e.currentSpeed)-e.rotationSpeed)<.1&&e.updateDetailsAndIndicators(e.rotation),e.rotationFrame=requestAnimationFrame(t)};this.rotationFrame=requestAnimationFrame(t)}},{key:"updateDetailsAndIndicators",value:function(e){var t=(e%360+360)%360,i=Math.floor(t/360*6);this.elements.details.forEach((function(e,t){o.default.to(e,{opacity:t===i?1:0,duration:.1,ease:"ease"})})),this.elements.indicators.forEach((function(e,t){e.style.backgroundColor=t===i?"hsl(78, 100%, 15%)":"hsla(78, 100%, 15%, 0.3)"})),this.elements.galleries.forEach((function(e,t){var n=e.querySelector("img");o.default.to(n,{filter:t===i?"grayscale(0%)":"grayscale(100%)",duration:.5})}))}},{key:"onWheel",value:function(e){e.preventDefault();var t=1.5*e.deltaY;Math.abs(t)>1&&(this.directionMultiplier=t>0?-1:1);var i=Math.abs(t);t>0&&this.directionMultiplier<0||t<0&&this.directionMultiplier>0?this.currentSpeed=this.directionMultiplier*Math.max(this.rotationSpeed,i):this.currentSpeed=i*this.directionMultiplier}},{key:"onTouchStart",value:function(e){e.preventDefault(),this.isTouching=!0,this.touchStart=e.touches[0].clientY,this.touchY=this.touchStart,this.touchVelocity=0}},{key:"onTouchMove",value:function(e){if(e.preventDefault(),this.isTouching){var t=e.touches[0].clientY,i=this.touchY-t;this.touchVelocity=i,this.lastDeltaY=i,this.onWheel({preventDefault:function(){},deltaY:2*i}),this.touchY=t}}},{key:"onTouchEnd",value:function(){var e=this;this.isTouching=!1;var t=15*this.touchVelocity,i=function(){Math.abs(t)>.1&&(e.onWheel({preventDefault:function(){},deltaY:t}),t*=.95,requestAnimationFrame(i))};requestAnimationFrame(i),this.touchStart=null,this.touchY=null}},{key:"onGalleryClick",value:function(e,t){t.preventDefault(),t.stopPropagation();var i=e.querySelector("a"),n=e.querySelector("img"),r=i.getAttribute("href");this.onNavigationCallback=function(){window.app.onChange({url:r})},this.galleryName=n.alt,this.elements.galleryName.innerText=this.galleryName,this.animateTransition()}},{key:"animateTransition",value:function(){var e=this,t=o.default.timeline(),i=Math.max(2*window.innerHeight,2*window.innerWidth);return t.set(this.elements.revealer,{display:"flex",y:"".concat(i,"px"),rotate:20}),t.set(this.elements.galleryName,{opacity:0,rotate:-20}),t.addLabel("firstHalf").to(this.elements.revealer,{y:"0",duration:1.2,ease:"power3.inOut"},"firstHalf").to(this.elements.galleryName,{opacity:1,duration:.8,ease:"power2.out"},"firstHalf+=0.4"),t.call((function(){e.onNavigationCallback&&(e.onNavigationCallback(),e.onNavigationCallback=null)}),null,"+=0.5"),t.addLabel("secondHalf").to(this.elements.galleryName,{opacity:0,duration:.6,ease:"power2.in"},"secondHalf").to(this.elements.revealer,{y:"-".concat(i,"px"),duration:2,rotate:20,ease:"power3.inOut"},"secondHalf+=0.2"),t.set(this.elements.revealer,{display:"none"}),t}},{key:"addEventListener",value:function(){var e=this;window.addEventListener("wheel",this.onWheel.bind(this),{passive:!1}),"ontouchstart"in window&&(this.element.addEventListener("touchstart",this.onTouchStart.bind(this)),this.element.addEventListener("touchmove",this.onTouchMove.bind(this)),this.element.addEventListener("touchend",this.onTouchEnd.bind(this))),r.forEach(this.elements.galleries,(function(t){t.querySelector("a").addEventListener("click",e.onGalleryClick.bind(e,t))}))}},{key:"removeEventListeners",value:function(){var e=this;window.removeEventListener("wheel",this.onWheel.bind(this)),"ontouchstart"in window&&(this.element.removeEventListener("touchstart",this.onTouchStart.bind(this)),this.element.removeEventListener("touchmove",this.onTouchMove.bind(this)),this.element.removeEventListener("touchend",this.onTouchEnd.bind(this))),r.forEach(this.elements.galleries,(function(t){t.querySelector("a").removeEventListener("click",e.onGalleryClick.bind(e,t))}))}},{key:"destroy",value:function(){this.rotationFrame&&cancelAnimationFrame(this.rotationFrame),this.removeEventListeners(),h(t,"destroy",this,3)([])}}])&&l(i.prototype,n),a&&l(i,a),Object.defineProperty(i,"prototype",{writable:!1}),i;var i,n,a}(n.default)}},(function(e){e.h=()=>"3b77e3a94bd9253f3f78"}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi43YjU3N2Y3NTExY2IwY2NjNzMwYS5ob3QtdXBkYXRlLmpzIiwibWFwcGluZ3MiOiI7bW1FQUV3QixJQUVIQSxFQUFJLFNBQUFDLEdBQ3ZCLFNBQUFELElBQWMsSUFBQUUsRUFtQ3FCLG1HQW5DckJDLENBQUEsS0FBQUgsSUFDWkUsRUFBQUUsRUFBQSxLQUFBSixFQUFBLENBQU0sQ0FDSkssR0FBSSxPQUNKQyxRQUFTLFFBQ1RDLFNBQVUsQ0FDUkMsVUFBVyxrQkFDWEMsT0FBUSxVQUNSQyxTQUFVLFlBQ1ZDLFlBQWEsa0JBQ2JDLFFBQVMsMEJBQ1RDLFdBQVksc0JBS1hDLFNBQVcsRUFDaEJaLEVBQUthLGNBQWdCLEdBQ3JCYixFQUFLYyxhQUFlLEVBQ3BCZCxFQUFLZSxvQkFBc0IsRUFDM0JmLEVBQUtnQixTQUFXQyxZQUFZQyxNQUc1QmxCLEVBQUttQixXQUFhLEtBQ2xCbkIsRUFBS29CLE9BQVMsS0FDZHBCLEVBQUtxQixXQUFhLEVBQ2xCckIsRUFBS3NCLGNBQWdCLEVBQ3JCdEIsRUFBS3VCLFlBQWEsRUFHbEJ2QixFQUFLd0IsZ0JBQWlCLEVBQ3RCeEIsRUFBS3lCLGFBQWUsSUFDcEJ6QixFQUFLMEIsaUJBQW1CLEtBQ3hCMUIsRUFBSzJCLGdCQUFrQixLQUd2QjNCLEVBQUs0QixxQkFBdUIsS0FBSzVCLENBQ25DLENBQUMsNFJBQUE2QixDQUFBL0IsRUFBQUMsS0FBQUQsS0FBQSxFQUFBZ0MsSUFBQSxTQUFBQyxNQUVELFdBQ0VDLEVBQUFsQyxFQUFBLGdCQUFBa0MsQ0FBQSxJQUNBQyxLQUFLQyxnQkFDTEQsS0FBS0Usa0JBRVAsR0FBQyxDQUFBTCxJQUFBLGdCQUFBQyxNQUVELFdBQ0UsSUFBTXhCLEVBQVMwQixLQUFLNUIsU0FBU0UsT0FDN0JBLEVBQU82QixNQUFNQyxlQUFpQixjQUU5QjlCLEVBQU82QixNQUFNRSxVQUFZLG9EQUV6QkwsS0FBS00sbUJBQ1AsR0FBQyxDQUFBVCxJQUFBLGlCQUFBQyxNQUVILFdBQ0VFLEtBQUtULGdCQUFp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QUFLNUUsT0FDakVBLEtBQUs3QixRQUFRK0IsaUJBQWlCLFdBQVlGLEtBQUtnRixXQUFXSixLQUFLNUUsUUFHbkVpRixFQUFBQSxRQUFVakYsS0FBSzVCLFNBQVNDLFdBQVcsU0FBQzZELEdBQ3JCQSxFQUFRRSxjQUFjLEtBQzlCbEMsaUJBQWlCLFFBQVN5RSxFQUFLTyxlQUFlTixLQUFLRCxFQUFNekMsR0FDaEUsR0FDRixHQUFDLENBQUFyQyxJQUFBLHVCQUFBQyxNQUVELFdBQXVCLElBQUFxRixFQUFBLEtBQ3JCM0IsT0FBTzRCLG9CQUFvQixRQUFTcEYsS0FBSytDLFFBQVE2QixLQUFLNUUsT0FFbEQsaUJBQWtCd0QsU0FDbEJ4RCxLQUFLN0IsUUFBUWlILG9CQUFvQixhQUFjcEYsS0FBSzhFLGFBQWFGLEtBQUs1RSxPQUN0RUEsS0FBSzdCLFFBQVFpSCxvQkFBb0IsWUFBYXBGLEtBQUsrRSxZQUFZSCxLQUFLNUUsT0FDcEVBLEtBQUs3QixRQUFRaUgsb0JBQW9CLFdBQVlwRixLQUFLZ0YsV0FBV0osS0FBSzVFLFFBR3RFaUYsRUFBQUEsUUFBVWpGLEtBQUs1QixTQUFTQyxXQUFXLFNBQUM2RCxHQUNyQkEsRUFBUUUsY0FBYyxLQUM5QmdELG9CQUFvQixRQUFTRCxFQUFLRCxlQUFlTixLQUFLTyxFQUFNakQsR0FDbkUsR0FDRixHQUFDLENBQUFyQyxJQUFBLFVBQUFDLE1BRUQsV0FDTUUsS0FBS21CLGVBQ1BrRSxxQkFBcUJyRixLQUFLbUIsZUFFNUJuQixLQUFLc0YsdUJBQ0x2RixFQUFBbEMsRUFBQSxpQkFBQWtDLENBQUEsR0FDRiwrRkFBQyxDQXpTc0IsQ0FBU3dGLEVBQUFBLHdCQ0psQ0MsRUFBb0JDLEVBQUksSUFBTSIsInNvdXJjZXMiOlsid2VicGFjazovL2hlcm1hbm4vLi9hcHAvcGFnZXMvSG9tZS9pbmRleC5qcyIsIndlYnBhY2s6Ly9oZXJtYW5uL3dlYnBhY2svcnVudGltZS9nZXRGdWxsSGFzaCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUGFnZSBmcm9tIFwiY2xhc3Nlcy9QYWdlLmpzXCI7XHJcbmltcG9ydCBfIGZyb20gXCJsb2Rhc2hcIjtcclxuaW1wb3J0IEdTQVAgZnJvbSBcImdzYXBcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEhvbWUgZXh0ZW5kcyBQYWdlIHtcclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHN1cGVyKHtcclxuICAgICAgaWQ6IFwiaG9tZVwiLFxyXG4gICAgICBlbGVtZW50OiBcIi5ob21lXCIsXHJcbiAgICAgIGVsZW1lbnRzOiB7XHJcbiAgICAgICAgZ2FsbGVyaWVzOiBcIi5nYWxsZXJ5X19pbWFnZVwiLFxyXG4gICAgICAgIHNsaWRlcjogXCIuc2xpZGVyXCIsXHJcbiAgICAgICAgcmV2ZWFsZXI6IFwiLnJldmVhbGVyXCIsXHJcbiAgICAgICAgZ2FsbGVyeU5hbWU6IFwiLnJldmVhbGVyX190ZXh0XCIsXHJcbiAgICAgICAgZGV0YWlsczogXCIuZ2FsbGVyeV9fZGV0YWlsc19faXRlbVwiLFxyXG4gICAgICAgIGluZGljYXRvcnM6IFwiLmluZGljYXRvci1kb3RcIlxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBSb3RhdGlvbiBzeXN0ZW1cclxuICAgIHRoaXMucm90YXRpb24gPSAwO1xyXG4gICAgdGhpcy5yb3RhdGlvblNwZWVkID0gMzYwIC8gMzY7XHJcbiAgICB0aGlzLmN1cnJlbnRTcGVlZCA9IDA7XHJcbiAgICB0aGlzLmRpcmVjdGlvbk11bHRpcGxpZXIgPSAxO1xyXG4gICAgdGhpcy5sYXN0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpO1xyXG4gICAgXHJcbiAgICAvLyBUb3VjaCB0cmFja2luZyBwcm9wZXJ0aWVzXHJcbiAgICB0aGlzLnRvdWNoU3RhcnQgPSBudWxsO1xyXG4gICAgdGhpcy50b3VjaFkgPSBudWxsO1xyXG4gICAgdGhpcy5sYXN0RGVsdGFZID0gMDtcclxuICAgIHRoaXMudG91Y2hWZWxvY2l0eSA9IDA7XHJcbiAgICB0aGlzLmlzVG91Y2hpbmcgPSBmYWxzZTtcclxuICAgIFxyXG4gICAgLy8gSW5pdGlhbGl6YXRpb24gc3RhdGVzXHJcbiAgICB0aGlzLmlzSW5pdGlhbGl6aW5nID0gZmFsc2U7XHJcbiAgICB0aGlzLmluaXRpYWxTcGVlZCA9IDg2MDtcclxuICAgIHRoaXMuaW5pdGlhbFN0YXJ0VGltZSA9IG51bGw7XHJcbiAgICB0aGlzLmluaXRpYWxEdXJhdGlvbiA9IDI3MDA7XHJcblxyXG4gICAgLy8gTmF2aWdhdGlvbiBzdGF0ZVxyXG4gICAgdGhpcy5vbk5hdmlnYXRpb25DYWxsYmFjayA9IG51bGw7XHJcbiAgfVxyXG5cclxuICBjcmVhdGUoKSB7XHJcbiAgICBzdXBlci5jcmVhdGUoKTtcclxuICAgIHRoaXMuc2V0dXBSb3RhdGlvbigpO1xyXG4gICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCk7XHJcblxyXG4gIH1cclxuXHJcbiAgc2V0dXBSb3RhdGlvbigpIHtcclxuICAgIGNvbnN0IHNsaWRlciA9IHRoaXMuZWxlbWVudHMuc2xpZGVyO1xyXG4gICAgc2xpZGVyLnN0eWxlLnRyYW5zZm9ybVN0eWxlID0gJ3ByZXNlcnZlLTNkJztcclxuICAgIFxyXG4gICAgc2xpZGVyLnN0eWxlLnRyYW5zZm9ybSA9ICdwZXJzcGVjdGl2ZSgxMDAwcHgpIHJvdGF0ZVgoLTE2ZGVnKSByb3RhdGVZKDBkZWcpJztcclxuXHJcbiAgICB0aGlzLnN0YXJ0Um90YXRpb25Mb29wKCk7XHJcbiAgfVxyXG5cclxuaW5pdGlhbFNwZWVkVXAoKXtcclxuICB0aGlzLmlzSW5pdGlhbGl6aW5nID0gdHJ1ZVxyXG59XHJcblxyXG4gIHN0YXJ0Um90YXRpb25Mb29wKCkge1xyXG4gICAgY29uc3QgYW5pbWF0ZSA9IChjdXJyZW50VGltZSkgPT4ge1xyXG4gICAgICBjb25zdCBkZWx0YVRpbWUgPSAoY3VycmVudFRpbWUgLSB0aGlzLmxhc3RUaW1lKSAvIDEwMDA7XHJcbiAgICAgIHRoaXMubGFzdFRpbWUgPSBjdXJyZW50VGltZTtcclxuXHJcbiAgICAgIGlmICh0aGlzLmlzSW5pdGlhbGl6aW5nKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmluaXRpYWxTdGFydFRpbWUpIHRoaXMuaW5pdGlhbFN0YXJ0VGltZSA9IGN1cnJlbnRUaW1lO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGVsYXBzZWRUaW1lID0gY3VycmVudFRpbWUgLSB0aGlzLmluaXRpYWxTdGFydFRpbWU7XHJcbiAgICAgICAgY29uc3QgcHJvZ3Jlc3MgPSBNYXRoLm1pbihlbGFwc2VkVGltZSAvIHRoaXMuaW5pdGlhbER1cmF0aW9uLCAxKTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLmN1cnJlbnRTcGVlZCA9ICh0aGlzLmluaXRpYWxTcGVlZCAtICh0aGlzLmluaXRpYWxTcGVlZCAtIHRoaXMucm90YXRpb25TcGVlZCkgKiBwcm9ncmVzcykgKiB0aGlzLmRpcmVjdGlvbk11bHRpcGxpZXI7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHByb2dyZXNzID09PSAxKSB7XHJcbiAgICAgICAgICB0aGlzLmlzSW5pdGlhbGl6aW5nID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnN0IHRhcmdldFNwZWVkID0gdGhpcy5yb3RhdGlvblNwZWVkICogdGhpcy5kaXJlY3Rpb25NdWx0aXBsaWVyO1xyXG4gICAgICAgIHRoaXMuY3VycmVudFNwZWVkICs9ICh0YXJnZXRTcGVlZCAtIHRoaXMuY3VycmVudFNwZWVkKSAqIDAuMjtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5yb3RhdGlvbiArPSB0aGlzLmN1cnJlbnRTcGVlZCAqIGRlbHRhVGltZTtcclxuICAgICAgXHJcbiAgICAgIHRoaXMuZWxlbWVudHMuc2xpZGVyLnN0eWxlLnRyYW5zZm9ybSA9IFxyXG4gICAgICAgIGBwZXJzcGVjdGl2ZSgxMDAwcHgpIHJvdGF0ZVgoLTE2ZGVnKSByb3RhdGVZKCR7dGhpcy5yb3RhdGlvbn1kZWcpYDtcclxuXHJcbiAgICAgIGlmIChNYXRoLmFicyhNYXRoLmFicyh0aGlzLmN1cnJlbnRTcGVlZCkgLSB0aGlzLnJvdGF0aW9uU3BlZWQpIDwgMC4xKSB7XHJcbiAgICAgICAgdGhpcy51cGRhdGVEZXRhaWxzQW5kSW5kaWNhdG9ycyh0aGlzLnJvdGF0aW9uKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5yb3RhdGlvbkZyYW1lID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGFuaW1hdGUpO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnJvdGF0aW9uRnJhbWUgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoYW5pbWF0ZSk7XHJcbiAgfVxyXG5cclxuICB1cGRhdGVEZXRhaWxzQW5kSW5kaWNhdG9ycyhyb3RhdGlvbikge1xyXG4gICAgY29uc3Qgbm9ybWFsaXplZFJvdGF0aW9uID0gKChyb3RhdGlvbiAlIDM2MCkgKyAzNjApICUgMzYwO1xyXG4gICAgY29uc3QgYWN0aXZlSW5kZXggPSBNYXRoLmZsb29yKChub3JtYWxpemVkUm90YXRpb24gLyAzNjApICogNik7XHJcbiAgICBcclxuICAgIHRoaXMuZWxlbWVudHMuZGV0YWlscy5mb3JFYWNoKChkZXRhaWwsIGluZGV4KSA9PiB7XHJcbiAgICAgIEdTQVAudG8oZGV0YWlsLCB7XHJcbiAgICAgICAgb3BhY2l0eTogaW5kZXggPT09IGFjdGl2ZUluZGV4ID8gMSA6IDAsXHJcbiAgICAgICAgZHVyYXRpb246IDAuMSxcclxuICAgICAgICBlYXNlOiBcImVhc2VcIlxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuZWxlbWVudHMuaW5kaWNhdG9ycy5mb3JFYWNoKChpbmRpY2F0b3IsIGluZGV4KSA9PiB7XHJcbiAgICAgIGluZGljYXRvci5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBpbmRleCA9PT0gYWN0aXZlSW5kZXggPyBcclxuICAgICAgICAnaHNsKDc4LCAxMDAlLCAxNSUpJyA6IFxyXG4gICAgICAgICdoc2xhKDc4LCAxMDAlLCAxNSUsIDAuMyknO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5lbGVtZW50cy5nYWxsZXJpZXMuZm9yRWFjaCgoZ2FsbGVyeSwgaW5kZXgpID0+IHtcclxuICAgICAgY29uc3QgaW1nID0gZ2FsbGVyeS5xdWVyeVNlbGVjdG9yKCdpbWcnKTtcclxuICAgICAgR1NBUC50byhpbWcsIHtcclxuICAgICAgICBmaWx0ZXI6IGluZGV4ID09PSBhY3RpdmVJbmRleCA/ICdncmF5c2NhbGUoMCUpJyA6ICdncmF5c2NhbGUoMTAwJSknLFxyXG4gICAgICAgIGR1cmF0aW9uOiAwLjVcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIG9uV2hlZWwoZXZlbnQpIHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBjb25zdCBzY3JvbGxJbmZsdWVuY2UgPSBldmVudC5kZWx0YVkgKiAxLjU7XHJcblxyXG4gICAgaWYgKE1hdGguYWJzKHNjcm9sbEluZmx1ZW5jZSkgPiAxKSB7XHJcbiAgICAgICAgdGhpcy5kaXJlY3Rpb25NdWx0aXBsaWVyID0gc2Nyb2xsSW5mbHVlbmNlID4gMCA/IC0xIDogMTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBzY3JvbGxTcGVlZCA9IE1hdGguYWJzKHNjcm9sbEluZmx1ZW5jZSk7XHJcbiAgICBcclxuICAgIGlmICgoc2Nyb2xsSW5mbHVlbmNlID4gMCAmJiB0aGlzLmRpcmVjdGlvbk11bHRpcGxpZXIgPCAwKSB8fCBcclxuICAgICAgICAoc2Nyb2xsSW5mbHVlbmNlIDwgMCAmJiB0aGlzLmRpcmVjdGlvbk11bHRpcGxpZXIgPiAwKSkge1xyXG4gICAgICAgIHRoaXMuY3VycmVudFNwZWVkID0gdGhpcy5kaXJlY3Rpb25NdWx0aXBsaWVyICogXHJcbiAgICAgICAgICAgIE1hdGgubWF4KHRoaXMucm90YXRpb25TcGVlZCwgc2Nyb2xsU3BlZWQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLmN1cnJlbnRTcGVlZCA9IHNjcm9sbFNwZWVkICogdGhpcy5kaXJlY3Rpb25NdWx0aXBsaWVyO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgb25Ub3VjaFN0YXJ0KGV2ZW50KSB7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgdGhpcy5pc1RvdWNoaW5nID0gdHJ1ZTtcclxuICAgIHRoaXMudG91Y2hTdGFydCA9IGV2ZW50LnRvdWNoZXNbMF0uY2xpZW50WTtcclxuICAgIHRoaXMudG91Y2hZID0gdGhpcy50b3VjaFN0YXJ0O1xyXG4gICAgdGhpcy50b3VjaFZlbG9jaXR5ID0gMDtcclxuICB9XHJcblxyXG4gIG9uVG91Y2hNb3ZlKGV2ZW50KSB7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgaWYgKCF0aGlzLmlzVG91Y2hpbmcpIHJldHVybjtcclxuXHJcbiAgICBjb25zdCBjdXJyZW50WSA9IGV2ZW50LnRvdWNoZXNbMF0uY2xpZW50WTtcclxuICAgIGNvbnN0IGRlbHRhWSA9IHRoaXMudG91Y2hZIC0gY3VycmVudFk7XHJcbiAgICBcclxuICAgIHRoaXMudG91Y2hWZWxvY2l0eSA9IGRlbHRhWTtcclxuICAgIHRoaXMubGFzdERlbHRhWSA9IGRlbHRhWTtcclxuXHJcbiAgICB0aGlzLm9uV2hlZWwoeyBcclxuICAgICAgICBwcmV2ZW50RGVmYXVsdDogKCkgPT4ge30sXHJcbiAgICAgICAgZGVsdGFZOiBkZWx0YVkgKiAyXHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLnRvdWNoWSA9IGN1cnJlbnRZO1xyXG4gIH1cclxuXHJcbiAgb25Ub3VjaEVuZCgpIHtcclxuICAgIHRoaXMuaXNUb3VjaGluZyA9IGZhbHNlO1xyXG4gICAgXHJcbiAgICBjb25zdCBzdGFydFZlbG9jaXR5ID0gdGhpcy50b3VjaFZlbG9jaXR5ICogMTU7XHJcbiAgICBsZXQgY3VycmVudFZlbG9jaXR5ID0gc3RhcnRWZWxvY2l0eTtcclxuICAgIFxyXG4gICAgY29uc3QgZGVjYXkgPSAoKSA9PiB7XHJcbiAgICAgICAgaWYgKE1hdGguYWJzKGN1cnJlbnRWZWxvY2l0eSkgPiAwLjEpIHtcclxuICAgICAgICAgICAgdGhpcy5vbldoZWVsKHtcclxuICAgICAgICAgICAgICAgIHByZXZlbnREZWZhdWx0OiAoKSA9PiB7fSxcclxuICAgICAgICAgICAgICAgIGRlbHRhWTogY3VycmVudFZlbG9jaXR5XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY3VycmVudFZlbG9jaXR5ICo9IDAuOTU7XHJcbiAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShkZWNheSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZGVjYXkpO1xyXG4gICAgXHJcbiAgICB0aGlzLnRvdWNoU3RhcnQgPSBudWxsO1xyXG4gICAgdGhpcy50b3VjaFkgPSBudWxsO1xyXG4gIH1cclxuXHJcbiAgb25HYWxsZXJ5Q2xpY2soZ2FsbGVyeSwgZXZlbnQpIHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHJcbiAgICBjb25zdCBsaW5rID0gZ2FsbGVyeS5xdWVyeVNlbGVjdG9yKCdhJyk7XHJcbiAgICBjb25zdCBpbWdFbGVtZW50ID0gZ2FsbGVyeS5xdWVyeVNlbGVjdG9yKCdpbWcnKTtcclxuICAgIGNvbnN0IGhyZWYgPSBsaW5rLmdldEF0dHJpYnV0ZSgnaHJlZicpO1xyXG5cclxuICAgIHRoaXMub25OYXZpZ2F0aW9uQ2FsbGJhY2sgPSAoKSA9PiB7XHJcbiAgICAgIHdpbmRvdy5hcHAub25DaGFuZ2UoeyB1cmw6IGhyZWYgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuZ2FsbGVyeU5hbWUgPSBpbWdFbGVtZW50LmFsdDtcclxuICAgIHRoaXMuZWxlbWVudHMuZ2FsbGVyeU5hbWUuaW5uZXJUZXh0ID0gdGhpcy5nYWxsZXJ5TmFtZTtcclxuXHJcbiAgICB0aGlzLmFuaW1hdGVUcmFuc2l0aW9uKCk7XHJcbiAgfVxyXG5cclxuICBhbmltYXRlVHJhbnNpdGlvbigpIHtcclxuICAgIGNvbnN0IHRsID0gR1NBUC50aW1lbGluZSgpO1xyXG4gICAgY29uc3QgbWF4RGltZW5zaW9uID0gTWF0aC5tYXgod2luZG93LmlubmVySGVpZ2h0ICogMiwgd2luZG93LmlubmVyV2lkdGggKiAyKTtcclxuXHJcbiAgICB0bC5zZXQodGhpcy5lbGVtZW50cy5yZXZlYWxlciwge1xyXG4gICAgICBkaXNwbGF5OiAnZmxleCcsXHJcbiAgICAgIHk6IGAke21heERpbWVuc2lvbn1weGAsXHJcbiAgICAgIHJvdGF0ZTogMjBcclxuICAgIH0pO1xyXG5cclxuICAgIHRsLnNldCh0aGlzLmVsZW1lbnRzLmdhbGxlcnlOYW1lLCB7XHJcbiAgICAgIG9wYWNpdHk6IDAsXHJcbiAgICAgIHJvdGF0ZTogLTIwXHJcbiAgICB9KTtcclxuXHJcbiAgICB0bC5hZGRMYWJlbChcImZpcnN0SGFsZlwiKVxyXG4gICAgICAudG8odGhpcy5lbGVtZW50cy5yZXZlYWxlciwge1xyXG4gICAgICAgIHk6IFwiMFwiLFxyXG4gICAgICAgIGR1cmF0aW9uOiAxLjIsXHJcbiAgICAgICAgZWFzZTogXCJwb3dlcjMuaW5PdXRcIlxyXG4gICAgICB9LCBcImZpcnN0SGFsZlwiKVxyXG4gICAgICAudG8odGhpcy5lbGVtZW50cy5nYWxsZXJ5TmFtZSwge1xyXG4gICAgICAgIG9wYWNpdHk6IDEsXHJcbiAgICAgICAgZHVyYXRpb246IDAuOCxcclxuICAgICAgICBlYXNlOiBcInBvd2VyMi5vdXRcIlxyXG4gICAgICB9LCBcImZpcnN0SGFsZis9MC40XCIpO1xyXG5cclxuICAgIHRsLmNhbGwoKCkgPT4ge1xyXG4gICAgICBpZiAodGhpcy5vbk5hdmlnYXRpb25DYWxsYmFjaykge1xyXG4gICAgICAgIHRoaXMub25OYXZpZ2F0aW9uQ2FsbGJhY2soKTtcclxuICAgICAgICB0aGlzLm9uTmF2aWdhdGlvbkNhbGxiYWNrID0gbnVsbDtcclxuICAgICAgfVxyXG4gICAgfSwgbnVsbCwgXCIrPTAuNVwiKTtcclxuXHJcbiAgICB0bC5hZGRMYWJlbChcInNlY29uZEhhbGZcIilcclxuICAgICAgLnRvKHRoaXMuZWxlbWVudHMuZ2FsbGVyeU5hbWUsIHtcclxuICAgICAgICBvcGFjaXR5OiAwLFxyXG4gICAgICAgIGR1cmF0aW9uOiAwLjYsXHJcbiAgICAgICAgZWFzZTogXCJwb3dlcjIuaW5cIlxyXG4gICAgICB9LCBcInNlY29uZEhhbGZcIilcclxuICAgICAgLnRvKHRoaXMuZWxlbWVudHMucmV2ZWFsZXIsIHtcclxuICAgICAgICB5OiBgLSR7bWF4RGltZW5zaW9ufXB4YCxcclxuICAgICAgICBkdXJhdGlvbjogMixcclxuICAgICAgICByb3RhdGU6IDIwLFxyXG4gICAgICAgIGVhc2U6IFwicG93ZXIzLmluT3V0XCJcclxuICAgICAgfSwgXCJzZWNvbmRIYWxmKz0wLjJcIik7XHJcblxyXG4gICAgdGwuc2V0KHRoaXMuZWxlbWVudHMucmV2ZWFsZXIsIHsgZGlzcGxheTogJ25vbmUnIH0pO1xyXG5cclxuICAgIHJldHVybiB0bDtcclxuICB9XHJcblxyXG4gIGFkZEV2ZW50TGlzdGVuZXIoKSB7XHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignd2hlZWwnLCB0aGlzLm9uV2hlZWwuYmluZCh0aGlzKSwgeyBwYXNzaXZlOiBmYWxzZSB9KTtcclxuICAgIFxyXG4gICAgaWYgKCdvbnRvdWNoc3RhcnQnIGluIHdpbmRvdykge1xyXG4gICAgICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgdGhpcy5vblRvdWNoU3RhcnQuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIHRoaXMub25Ub3VjaE1vdmUuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdGhpcy5vblRvdWNoRW5kLmJpbmQodGhpcykpO1xyXG4gICAgfVxyXG5cclxuICAgIF8uZm9yRWFjaCh0aGlzLmVsZW1lbnRzLmdhbGxlcmllcywgKGdhbGxlcnkpID0+IHtcclxuICAgICAgY29uc3QgbGluayA9IGdhbGxlcnkucXVlcnlTZWxlY3RvcignYScpO1xyXG4gICAgICBsaW5rLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLm9uR2FsbGVyeUNsaWNrLmJpbmQodGhpcywgZ2FsbGVyeSkpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICByZW1vdmVFdmVudExpc3RlbmVycygpIHtcclxuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCd3aGVlbCcsIHRoaXMub25XaGVlbC5iaW5kKHRoaXMpKTtcclxuICAgIFxyXG4gICAgaWYgKCdvbnRvdWNoc3RhcnQnIGluIHdpbmRvdykge1xyXG4gICAgICAgIHRoaXMuZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgdGhpcy5vblRvdWNoU3RhcnQuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIHRoaXMub25Ub3VjaE1vdmUuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdGhpcy5vblRvdWNoRW5kLmJpbmQodGhpcykpO1xyXG4gICAgfVxyXG5cclxuICAgIF8uZm9yRWFjaCh0aGlzLmVsZW1lbnRzLmdhbGxlcmllcywgKGdhbGxlcnkpID0+IHtcclxuICAgICAgY29uc3QgbGluayA9IGdhbGxlcnkucXVlcnlTZWxlY3RvcignYScpO1xyXG4gICAgICBsaW5rLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLm9uR2FsbGVyeUNsaWNrLmJpbmQodGhpcywgZ2FsbGVyeSkpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBkZXN0cm95KCkge1xyXG4gICAgaWYgKHRoaXMucm90YXRpb25GcmFtZSkge1xyXG4gICAgICBjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLnJvdGF0aW9uRnJhbWUpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVycygpO1xyXG4gICAgc3VwZXIuZGVzdHJveSgpO1xyXG4gIH1cclxufSIsIl9fd2VicGFja19yZXF1aXJlX18uaCA9ICgpID0+IChcIjNiNzdlM2E5NGJkOTI1M2YzZjc4XCIpIl0sIm5hbWVzIjpbIkhvbWUiLCJfUGFnZSIsIl90aGlzIiwiX2NsYXNzQ2FsbENoZWNrIiwiX2NhbGxTdXBlciIsImlkIiwiZWxlbWVudCIsImVsZW1lbnRzIiwiZ2FsbGVyaWVzIiwic2xpZGVyIiwicmV2ZWFsZXIiLCJnYWxsZXJ5TmFtZSIsImRldGFpbHMiLCJpbmRpY2F0b3JzIiwicm90YXRpb24iLCJyb3RhdGlvblNwZWVkIiwiY3VycmVudFNwZWVkIiwiZGlyZWN0aW9uTXVsdGlwbGllciIsImxhc3RUaW1lIiwicGVyZm9ybWFuY2UiLCJub3ciLCJ0b3VjaFN0YXJ0IiwidG91Y2hZIiwibGFzdERlbHRhWSIsInRvdWNoVmVsb2NpdHkiLCJpc1RvdWNoaW5nIiwiaXNJbml0aWFsaXppbmciLCJpbml0aWFsU3BlZWQiLCJpbml0aWFsU3RhcnRUaW1lIiwiaW5pdGlhbER1cmF0aW9uIiwib25OYXZpZ2F0aW9uQ2FsbGJhY2siLCJfaW5oZXJpdHMiLCJrZXkiLCJ2YWx1ZSIsIl9zdXBlclByb3BHZXQiLCJ0aGlzIiwic2V0dXBSb3RhdGlvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJzdHlsZSIsInRyYW5zZm9ybVN0eWxlIiwidHJhbnNmb3JtIiwic3RhcnRSb3RhdGlvbkxvb3AiLCJfdGhpczIiLCJhbmltYXRlIiwiY3VycmVudFRpbWUiLCJkZWx0YVRpbWUiLCJlbGFwc2VkVGltZSIsInByb2dyZXNzIiwiTWF0aCIsIm1pbiIsInRhcmdldFNwZWVkIiwiY29uY2F0IiwiYWJzIiwidXBkYXRlRGV0YWlsc0FuZEluZGljYXRvcnMiLCJyb3RhdGlvbkZyYW1lIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwibm9ybWFsaXplZFJvdGF0aW9uIiwiYWN0aXZlSW5kZXgiLCJmbG9vciIsImZvckVhY2giLCJkZXRhaWwiLCJpbmRleCIsIkdTQVAiLCJ0byIsIm9wYWNpdHkiLCJkdXJhdGlvbiIsImVhc2UiLCJpbmRpY2F0b3IiLCJiYWNrZ3JvdW5kQ29sb3IiLCJnYWxsZXJ5IiwiaW1nIiwicXVlcnlTZWxlY3RvciIsImZpbHRlciIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJzY3JvbGxJbmZsdWVuY2UiLCJkZWx0YVkiLCJzY3JvbGxTcGVlZCIsIm1heCIsInRvdWNoZXMiLCJjbGllbnRZIiwiY3VycmVudFkiLCJvbldoZWVsIiwiX3RoaXMzIiwiY3VycmVudFZlbG9jaXR5IiwiZGVjYXkiLCJzdG9wUHJvcGFnYXRpb24iLCJsaW5rIiwiaW1nRWxlbWVudCIsImhyZWYiLCJnZXRBdHRyaWJ1dGUiLCJ3aW5kb3ciLCJhcHAiLCJvbkNoYW5nZSIsInVybCIsImFsdCIsImlubmVyVGV4dCIsImFuaW1hdGVUcmFuc2l0aW9uIiwiX3RoaXM0IiwidGwiLCJ0aW1lbGluZSIsIm1heERpbWVuc2lvbiIsImlubmVySGVpZ2h0IiwiaW5uZXJXaWR0aCIsInNldCIsImRpc3BsYXkiLCJ5Iiwicm90YXRlIiwiYWRkTGFiZWwiLCJjYWxsIiwiX3RoaXM1IiwiYmluZCIsInBhc3NpdmUiLCJvblRvdWNoU3RhcnQiLCJvblRvdWNoTW92ZSIsIm9uVG91Y2hFbmQiLCJfIiwib25HYWxsZXJ5Q2xpY2siLCJfdGhpczYiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiY2FuY2VsQW5pbWF0aW9uRnJhbWUiLCJyZW1vdmVFdmVudExpc3RlbmVycyIsIlBhZ2UiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiaCJdLCJzb3VyY2VSb290IjoiIn0=